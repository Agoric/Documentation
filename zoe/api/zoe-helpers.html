<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ZoeHelpers | Documentation</title>
    <meta name="description" content="Secure smart contracts">
    <link rel="icon" href="/documentation/favicon-full.ico">
  <script>
    const logoUrlChanger = setInterval(function() {
    //Anchor above the logo image
    const homeEls = document.getElementsByClassName("home-link");
    if(homeEls.length > 0) {
      const homeEl = homeEls[0];
      homeEl.setAttribute("href", "https://agoric.com");
      homeEl.setAttribute("onclick", "return false;");
      clearInterval(logoUrlChanger);
    }

    //Actual logo image
    const logoEls = document.getElementsByClassName("logo")
    if(logoEls.length > 0) {
      const logoEl = logoEls[0]
      logoEl.setAttribute("onclick", "document.location='https://agoric.com';return false;");
      clearInterval(logoUrlChanger);
    }
   }, 1000) </script>
    
    <link rel="preload" href="/documentation/assets/css/0.styles.67a138ae.css" as="style"><link rel="preload" href="/documentation/assets/js/app.c23e6624.js" as="script"><link rel="preload" href="/documentation/assets/js/2.a254c233.js" as="script"><link rel="preload" href="/documentation/assets/js/49.df22f3e6.js" as="script"><link rel="prefetch" href="/documentation/assets/js/10.6c37f9c8.js"><link rel="prefetch" href="/documentation/assets/js/11.e0024b52.js"><link rel="prefetch" href="/documentation/assets/js/12.74bfd2a3.js"><link rel="prefetch" href="/documentation/assets/js/13.cefd02ed.js"><link rel="prefetch" href="/documentation/assets/js/14.88aba296.js"><link rel="prefetch" href="/documentation/assets/js/15.1900ab85.js"><link rel="prefetch" href="/documentation/assets/js/16.4e85495b.js"><link rel="prefetch" href="/documentation/assets/js/17.e10b5bcd.js"><link rel="prefetch" href="/documentation/assets/js/18.574ed5ce.js"><link rel="prefetch" href="/documentation/assets/js/19.9b4e6f9b.js"><link rel="prefetch" href="/documentation/assets/js/20.08f9a81b.js"><link rel="prefetch" href="/documentation/assets/js/21.5d61c950.js"><link rel="prefetch" href="/documentation/assets/js/22.e78cb5a5.js"><link rel="prefetch" href="/documentation/assets/js/23.0c2f00a9.js"><link rel="prefetch" href="/documentation/assets/js/24.c9cb1168.js"><link rel="prefetch" href="/documentation/assets/js/25.1267e519.js"><link rel="prefetch" href="/documentation/assets/js/26.37dc9f54.js"><link rel="prefetch" href="/documentation/assets/js/27.101b12bb.js"><link rel="prefetch" href="/documentation/assets/js/28.67746bdf.js"><link rel="prefetch" href="/documentation/assets/js/29.88556b15.js"><link rel="prefetch" href="/documentation/assets/js/3.4fb5f3f9.js"><link rel="prefetch" href="/documentation/assets/js/30.f03862cc.js"><link rel="prefetch" href="/documentation/assets/js/31.c09cd8fd.js"><link rel="prefetch" href="/documentation/assets/js/32.db6f522e.js"><link rel="prefetch" href="/documentation/assets/js/33.fe658a49.js"><link rel="prefetch" href="/documentation/assets/js/34.e45af707.js"><link rel="prefetch" href="/documentation/assets/js/35.a2bbd702.js"><link rel="prefetch" href="/documentation/assets/js/36.c79d4833.js"><link rel="prefetch" href="/documentation/assets/js/37.a9c6bfe2.js"><link rel="prefetch" href="/documentation/assets/js/38.ead2cd31.js"><link rel="prefetch" href="/documentation/assets/js/39.38a58839.js"><link rel="prefetch" href="/documentation/assets/js/4.cdc7cf45.js"><link rel="prefetch" href="/documentation/assets/js/40.fc9eb250.js"><link rel="prefetch" href="/documentation/assets/js/41.c8a9eea7.js"><link rel="prefetch" href="/documentation/assets/js/42.7645e245.js"><link rel="prefetch" href="/documentation/assets/js/43.3893db37.js"><link rel="prefetch" href="/documentation/assets/js/44.53fcb245.js"><link rel="prefetch" href="/documentation/assets/js/45.ae4b4c8b.js"><link rel="prefetch" href="/documentation/assets/js/46.61d921f3.js"><link rel="prefetch" href="/documentation/assets/js/47.e64d8406.js"><link rel="prefetch" href="/documentation/assets/js/48.975655a6.js"><link rel="prefetch" href="/documentation/assets/js/5.b4c973dc.js"><link rel="prefetch" href="/documentation/assets/js/50.8d97d869.js"><link rel="prefetch" href="/documentation/assets/js/51.9bc23c7b.js"><link rel="prefetch" href="/documentation/assets/js/52.7485539a.js"><link rel="prefetch" href="/documentation/assets/js/53.1df64c72.js"><link rel="prefetch" href="/documentation/assets/js/54.6784ff7c.js"><link rel="prefetch" href="/documentation/assets/js/55.33d1b5cc.js"><link rel="prefetch" href="/documentation/assets/js/56.4d026949.js"><link rel="prefetch" href="/documentation/assets/js/57.6cd81610.js"><link rel="prefetch" href="/documentation/assets/js/58.1c2ebde1.js"><link rel="prefetch" href="/documentation/assets/js/59.c5315888.js"><link rel="prefetch" href="/documentation/assets/js/6.05813f6d.js"><link rel="prefetch" href="/documentation/assets/js/60.77e3fc8d.js"><link rel="prefetch" href="/documentation/assets/js/61.b3a40280.js"><link rel="prefetch" href="/documentation/assets/js/62.295c19fc.js"><link rel="prefetch" href="/documentation/assets/js/63.7baf0019.js"><link rel="prefetch" href="/documentation/assets/js/7.8c693afd.js"><link rel="prefetch" href="/documentation/assets/js/8.3aa7be5a.js"><link rel="prefetch" href="/documentation/assets/js/9.2954e9a6.js">
    <link rel="stylesheet" href="/documentation/assets/css/0.styles.67a138ae.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/documentation/" class="home-link router-link-active"><img src="/documentation/logo.svg" alt="Documentation" class="logo"> <span class="site-name can-hide">Documentation</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Getting Started Menu" class="dropdown-title"><span class="title">Getting Started</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/documentation/getting-started/" class="nav-link">Documentation Guide</a></li><li class="dropdown-item"><!----> <a href="/documentation/getting-started/before-using-agoric.html" class="nav-link">Before Using Agoric</a></li><li class="dropdown-item"><!----> <a href="/documentation/getting-started/start-a-project.html" class="nav-link">Starting a Project</a></li><li class="dropdown-item"><!----> <a href="/documentation/getting-started/development-cycle.html" class="nav-link">Development Cycle</a></li><li class="dropdown-item"><!----> <a href="/documentation/getting-started/deploying.html" class="nav-link">Deploying Smart Contracts</a></li><li class="dropdown-item"><!----> <a href="/documentation/getting-started/ertp-introduction.html" class="nav-link">ERTP Introduction</a></li><li class="dropdown-item"><!----> <a href="/documentation/getting-started/intro-zoe.html" class="nav-link">Zoe Introduction</a></li><li class="dropdown-item"><!----> <a href="/documentation/getting-started/agoric-cli-guide.html" class="nav-link">Agoric CLI Guide</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Guides" class="dropdown-title"><span class="title">Guides</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/documentation/getting-started/" class="nav-link">Documentation</a></li><li class="dropdown-item"><!----> <a href="/documentation/getting-started/agoric-cli-guide/" class="nav-link">Agoric CLI</a></li><li class="dropdown-item"><!----> <a href="/documentation/dapps/" class="nav-link">Agoric Dapps</a></li><li class="dropdown-item"><!----> <a href="/documentation/ertp/guide/" class="nav-link">ERTP</a></li><li class="dropdown-item"><!----> <a href="/documentation/zoe/guide/" class="nav-link">Zoe</a></li><li class="dropdown-item"><!----> <a href="/documentation/wallet-api.html" class="nav-link">Wallet API</a></li><li class="dropdown-item"><!----> <a href="https://github.com/Agoric/agoric-sdk/blob/master/packages/SwingSet/docs/networking.md" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Dynamic IBC (dIBC)
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="/documentation/distributed-programming.html" class="nav-link">JS Distributed Programming</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Zoe Menu" class="dropdown-title"><span class="title">Zoe</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/documentation/getting-started/intro-zoe.html" class="nav-link">Introduction</a></li><li class="dropdown-item"><!----> <a href="/documentation/zoe/guide/" class="nav-link">Guide</a></li><li class="dropdown-item"><!----> <a href="/documentation/zoe/guide/contracts/autoswap.html" class="nav-link">Contracts</a></li><li class="dropdown-item"><!----> <a href="/documentation/zoe/api/" class="nav-link router-link-active">API</a></li><li class="dropdown-item"><!----> <a href="https://github.com/Agoric/agoric-sdk/tree/master/packages/zoe" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ERTP Menu" class="dropdown-title"><span class="title">ERTP</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/documentation/getting-started/ertp-introduction/" class="nav-link">Introduction</a></li><li class="dropdown-item"><!----> <a href="/documentation/ertp/guide/" class="nav-link">Guide</a></li><li class="dropdown-item"><!----> <a href="/documentation/ertp/api/" class="nav-link">API</a></li><li class="dropdown-item"><!----> <a href="https://github.com/Agoric/agoric-sdk/tree/master/packages/ERTP" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Platform Menu" class="dropdown-title"><span class="title">Platform</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/documentation/platform/" class="nav-link">Agoric Stack</a></li></ul></div></div><div class="nav-item"><a href="/documentation/glossary/" class="nav-link">Glossary</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Learn More Menu" class="dropdown-title"><span class="title">Learn More</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://agoric.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Agoric
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://agoric.com/papers/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Papers
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/Agoric/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Getting Started Menu" class="dropdown-title"><span class="title">Getting Started</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/documentation/getting-started/" class="nav-link">Documentation Guide</a></li><li class="dropdown-item"><!----> <a href="/documentation/getting-started/before-using-agoric.html" class="nav-link">Before Using Agoric</a></li><li class="dropdown-item"><!----> <a href="/documentation/getting-started/start-a-project.html" class="nav-link">Starting a Project</a></li><li class="dropdown-item"><!----> <a href="/documentation/getting-started/development-cycle.html" class="nav-link">Development Cycle</a></li><li class="dropdown-item"><!----> <a href="/documentation/getting-started/deploying.html" class="nav-link">Deploying Smart Contracts</a></li><li class="dropdown-item"><!----> <a href="/documentation/getting-started/ertp-introduction.html" class="nav-link">ERTP Introduction</a></li><li class="dropdown-item"><!----> <a href="/documentation/getting-started/intro-zoe.html" class="nav-link">Zoe Introduction</a></li><li class="dropdown-item"><!----> <a href="/documentation/getting-started/agoric-cli-guide.html" class="nav-link">Agoric CLI Guide</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Guides" class="dropdown-title"><span class="title">Guides</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/documentation/getting-started/" class="nav-link">Documentation</a></li><li class="dropdown-item"><!----> <a href="/documentation/getting-started/agoric-cli-guide/" class="nav-link">Agoric CLI</a></li><li class="dropdown-item"><!----> <a href="/documentation/dapps/" class="nav-link">Agoric Dapps</a></li><li class="dropdown-item"><!----> <a href="/documentation/ertp/guide/" class="nav-link">ERTP</a></li><li class="dropdown-item"><!----> <a href="/documentation/zoe/guide/" class="nav-link">Zoe</a></li><li class="dropdown-item"><!----> <a href="/documentation/wallet-api.html" class="nav-link">Wallet API</a></li><li class="dropdown-item"><!----> <a href="https://github.com/Agoric/agoric-sdk/blob/master/packages/SwingSet/docs/networking.md" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Dynamic IBC (dIBC)
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="/documentation/distributed-programming.html" class="nav-link">JS Distributed Programming</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Zoe Menu" class="dropdown-title"><span class="title">Zoe</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/documentation/getting-started/intro-zoe.html" class="nav-link">Introduction</a></li><li class="dropdown-item"><!----> <a href="/documentation/zoe/guide/" class="nav-link">Guide</a></li><li class="dropdown-item"><!----> <a href="/documentation/zoe/guide/contracts/autoswap.html" class="nav-link">Contracts</a></li><li class="dropdown-item"><!----> <a href="/documentation/zoe/api/" class="nav-link router-link-active">API</a></li><li class="dropdown-item"><!----> <a href="https://github.com/Agoric/agoric-sdk/tree/master/packages/zoe" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ERTP Menu" class="dropdown-title"><span class="title">ERTP</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/documentation/getting-started/ertp-introduction/" class="nav-link">Introduction</a></li><li class="dropdown-item"><!----> <a href="/documentation/ertp/guide/" class="nav-link">Guide</a></li><li class="dropdown-item"><!----> <a href="/documentation/ertp/api/" class="nav-link">API</a></li><li class="dropdown-item"><!----> <a href="https://github.com/Agoric/agoric-sdk/tree/master/packages/ERTP" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Platform Menu" class="dropdown-title"><span class="title">Platform</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/documentation/platform/" class="nav-link">Agoric Stack</a></li></ul></div></div><div class="nav-item"><a href="/documentation/glossary/" class="nav-link">Glossary</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Learn More Menu" class="dropdown-title"><span class="title">Learn More</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://agoric.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Agoric
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://agoric.com/papers/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Papers
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/Agoric/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/documentation/getting-started/intro-zoe.html" class="sidebar-link">Zoe Introduction</a></li><li><section class="sidebar-group depth-0"><a href="/documentation/zoe/guide/" class="sidebar-heading clickable"><span>Zoe Guide</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/documentation/zoe/guide/" class="sidebar-link">Zoe: Offer-Safety Enforcement</a></li><li><a href="/documentation/zoe/guide/offer-safety.html" class="sidebar-link">Offer Safety</a></li><li><a href="/documentation/zoe/guide/proposal.html" class="sidebar-link">The Structure of Proposals</a></li><li><a href="/documentation/zoe/guide/contract-requirements.html" class="sidebar-link">Contract Requirements</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/documentation/zoe/guide/contracts/" class="sidebar-heading clickable"><span>Zoe Contracts</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/documentation/zoe/guide/contracts/atomic-swap.html" class="sidebar-link">Atomic Swap</a></li><li><a href="/documentation/zoe/guide/contracts/autoswap.html" class="sidebar-link">Autoswap</a></li><li><a href="/documentation/zoe/guide/contracts/covered-call.html" class="sidebar-link">Covered Call</a></li><li><a href="/documentation/zoe/guide/contracts/second-price-auction.html" class="sidebar-link">Second-price auction</a></li><li><a href="/documentation/zoe/guide/contracts/simple-exchange.html" class="sidebar-link">Simple Exchange</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/documentation/zoe/api/" class="sidebar-heading clickable router-link-active open"><span>Zoe API</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/documentation/zoe/api/zoe.html" class="sidebar-link">Zoe</a></li><li><a href="/documentation/zoe/api/records.html" class="sidebar-link">Records</a></li><li><a href="/documentation/zoe/api/zoe-contract-facet.html" class="sidebar-link">Zoe Contract Facet</a></li><li><a href="/documentation/zoe/api/zoe-helpers.html" class="active sidebar-link">ZoeHelpers</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/documentation/zoe/api/zoe-helpers.html#zoehelpers-assertkeywords-keywords" class="sidebar-link">zoeHelpers.assertKeywords(keywords)</a></li><li class="sidebar-sub-header"><a href="/documentation/zoe/api/zoe-helpers.html#zoehelpers-assertnatmathhelpers-brand" class="sidebar-link">zoeHelpers.assertNatMathHelpers(brand)</a></li><li class="sidebar-sub-header"><a href="/documentation/zoe/api/zoe-helpers.html#zoehelpers-rejectifnotproposal-offerhandle-expectedproposalstructure" class="sidebar-link">zoeHelpers.rejectIfNotProposal(offerHandle, expectedProposalStructure)</a></li><li class="sidebar-sub-header"><a href="/documentation/zoe/api/zoe-helpers.html#zoehelpers-checkifproposal-offerhandle-expectedproposalstructure" class="sidebar-link">zoeHelpers.checkIfProposal(offerHandle, expectedProposalStructure)</a></li><li class="sidebar-sub-header"><a href="/documentation/zoe/api/zoe-helpers.html#zoehelpers-getactiveoffers-offerhandles" class="sidebar-link">zoeHelpers.getActiveOffers(offerHandles)</a></li><li class="sidebar-sub-header"><a href="/documentation/zoe/api/zoe-helpers.html#zoehelpers-rejectoffer-offerhandle" class="sidebar-link">zoeHelpers.rejectOffer(offerHandle)</a></li><li class="sidebar-sub-header"><a href="/documentation/zoe/api/zoe-helpers.html#zoehelpers-swap-keephandle-tryhandle-keephandleinactivemsg" class="sidebar-link">zoeHelpers.swap(keepHandle, tryHandle, keepHandleInactiveMsg)</a></li><li class="sidebar-sub-header"><a href="/documentation/zoe/api/zoe-helpers.html#zoehelpers-makeemptyoffer" class="sidebar-link">zoeHelpers.makeEmptyOffer()</a></li><li class="sidebar-sub-header"><a href="/documentation/zoe/api/zoe-helpers.html#zoehelpers-checkhook-offerhook-expected" class="sidebar-link">zoeHelpers.checkHook(offerHook, expected)</a></li><li class="sidebar-sub-header"><a href="/documentation/zoe/api/zoe-helpers.html#zoehelpers-escrowandallocateto-amount-payment-keyword-recipienthandle" class="sidebar-link">zoeHelpers.escrowAndAllocateTo({ amount, payment, keyword, recipientHandle })</a></li><li class="sidebar-sub-header"><a href="/documentation/zoe/api/zoe-helpers.html#zoehelpers-satisfies" class="sidebar-link">zoeHelpers.satisfies()</a></li><li class="sidebar-sub-header"><a href="/documentation/zoe/api/zoe-helpers.html#zoehelpers-isoffersafe" class="sidebar-link">zoeHelpers.isOfferSafe()</a></li><li class="sidebar-sub-header"><a href="/documentation/zoe/api/zoe-helpers.html#zoehelpers-trade-leftitem-rightitem" class="sidebar-link">zoeHelpers.trade(leftItem, rightItem)</a></li></ul></li></ul></section></li><li><a href="/documentation/zoe/roadmap/" class="sidebar-link">Zoe Roadmap</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="zoehelpers"><a href="#zoehelpers" class="header-anchor">#</a> ZoeHelpers</h1> <p>ZoeHelpers are functions that extract common contract code and
patterns into reusable helpers.</p> <p>These helper functions can be imported from @agoric/zoe/src/contractSupport. We
expect to move them to a separate package shortly, so it would become
'@agoric/zoe-contract-support'. The import provides a function <code>makeZoeHelpers()</code>,
which produces versions of the function that are bound to the current zoe instance.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> makeZoeHelpers <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@agoric/zoe/src/contractSupport/zoeHelpers'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span>
  assertKeywords<span class="token punctuation">,</span>
  assertNatMathHelpers<span class="token punctuation">,</span>
  checkIfProposal<span class="token punctuation">,</span>
  rejectOffer<span class="token punctuation">,</span>
  swap<span class="token punctuation">,</span>
  rejectIfNotProposal<span class="token punctuation">,</span>
  getActiveOffers<span class="token punctuation">,</span>
  makeEmptyOffer<span class="token punctuation">,</span>
  escrowAndAllocateTo<span class="token punctuation">,</span>
  isOfferSafe<span class="token punctuation">,</span>
  satisfies<span class="token punctuation">,</span>
  trade<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">makeZoeHelpers</span><span class="token punctuation">(</span>zoe<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="zoehelpers-assertkeywords-keywords"><a href="#zoehelpers-assertkeywords-keywords" class="header-anchor">#</a> zoeHelpers.assertKeywords(keywords)</h2> <ul><li><code>keywords</code> <code>{Array &lt;String&gt;}</code></li></ul> <p>Checks that the keywords submitted by the creator of the contract
instance match what the contract expects. Throws if incorrect or if there is
missing or extra keywords. Order of keywords is irrelevant.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> makeZoeHelpers <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@agoric/zoe/src/contractSupport/zoeHelpers'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span> assertKeywords <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">makeZoeHelpers</span><span class="token punctuation">(</span>zoe<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// proposal for offerHandle</span>
<span class="token keyword">const</span> proposal <span class="token operator">=</span> <span class="token punctuation">{</span>
  want<span class="token operator">:</span> <span class="token punctuation">{</span> Asset<span class="token operator">:</span> <span class="token function">moola</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  give<span class="token operator">:</span> <span class="token punctuation">{</span> Price<span class="token operator">:</span> <span class="token function">simoleans</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  exit<span class="token operator">:</span> <span class="token punctuation">{</span> onDemand<span class="token operator">:</span> <span class="token keyword">null</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token function">assertKeywords</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'Asset'</span><span class="token punctuation">,</span> <span class="token string">'Price'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="zoehelpers-assertnatmathhelpers-brand"><a href="#zoehelpers-assertnatmathhelpers-brand" class="header-anchor">#</a> zoeHelpers.assertNatMathHelpers(brand)</h2> <ul><li><code>brand</code> <code>{String}</code></li></ul> <p>Given a brand, assert that the mathHelpers for that issuer
are the 'nat' type (i.e. that the issuer is associated with
fungible assets). Returns <code>true</code> if they are <code>nat</code>, <code>false</code> if
they are not.</p> <h2 id="zoehelpers-rejectifnotproposal-offerhandle-expectedproposalstructure"><a href="#zoehelpers-rejectifnotproposal-offerhandle-expectedproposalstructure" class="header-anchor">#</a> zoeHelpers.rejectIfNotProposal(offerHandle, expectedProposalStructure)</h2> <ul><li><code>offerHandle</code> <code>{Handle}</code></li> <li><code>expectedProposalStructure</code> <code>{Object}</code></li></ul> <p>Throws and completes the offer if the <code>proposal</code> for the offer indexed by offerHandle does
not match the <code>expectedProposalStructure</code>. If a property (<code>want</code>,
<code>give</code> or <code>exit</code>) is undefined in
<code>expectedProposalStructure</code>, anything under that property in the
actual proposal is accepted.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> makeZoeHelpers <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@agoric/zoe/src/contractSupport/zoeHelpers'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span> rejectIfNotProposal <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">makeZoeHelpers</span><span class="token punctuation">(</span>zoe<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// proposal for offerHandle</span>
<span class="token keyword">const</span> proposal <span class="token operator">=</span> <span class="token punctuation">{</span>
  want<span class="token operator">:</span> <span class="token punctuation">{</span> Asset<span class="token operator">:</span> <span class="token function">moola</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  give<span class="token operator">:</span> <span class="token punctuation">{</span> Price<span class="token operator">:</span> <span class="token function">simoleans</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  exit<span class="token operator">:</span> <span class="token punctuation">{</span> onDemand<span class="token operator">:</span> <span class="token keyword">null</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token comment">// Throws: &quot;Asset&quot; !== &quot;Assets&quot;</span>
<span class="token function">rejectIfNotProposal</span><span class="token punctuation">(</span>
  offerHandle<span class="token punctuation">,</span>
  <span class="token function">harden</span><span class="token punctuation">(</span><span class="token punctuation">{</span> want<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'Assets'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> give<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'Price'</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span>
</code></pre></div><h2 id="zoehelpers-checkifproposal-offerhandle-expectedproposalstructure"><a href="#zoehelpers-checkifproposal-offerhandle-expectedproposalstructure" class="header-anchor">#</a> zoeHelpers.checkIfProposal(offerHandle, expectedProposalStructure)</h2> <ul><li><code>offerHandle</code> <code>{Handle}</code></li> <li><code>expectedProposalStructure</code> <code>{Object}</code></li></ul> <p>Like <code>rejectIfNotProposal</code>, this checks if the proposal has the
expected proposal structure. However, <code>checkIfProposal</code> returns a
boolean and never throws or completes the offer.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> makeZoeHelpers <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@agoric/zoe/src/contractSupport/zoeHelpers'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span> checkIfProposal <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">makeZoeHelpers</span><span class="token punctuation">(</span>zoe<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// proposal for offerHandle</span>
<span class="token keyword">const</span> proposal <span class="token operator">=</span> <span class="token punctuation">{</span>
  want<span class="token operator">:</span> <span class="token punctuation">{</span> Asset<span class="token operator">:</span> <span class="token function">moola</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  give<span class="token operator">:</span> <span class="token punctuation">{</span> Price<span class="token operator">:</span> <span class="token function">simoleans</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  exit<span class="token operator">:</span> <span class="token punctuation">{</span> onDemand<span class="token operator">:</span> <span class="token keyword">null</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token function">checkIfProposal</span><span class="token punctuation">(</span>
  offerHandle<span class="token punctuation">,</span>
  <span class="token function">harden</span><span class="token punctuation">(</span><span class="token punctuation">{</span> want<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'Assets'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> give<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'Price'</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span> <span class="token comment">// =&gt; false</span>
</code></pre></div><h2 id="zoehelpers-getactiveoffers-offerhandles"><a href="#zoehelpers-getactiveoffers-offerhandles" class="header-anchor">#</a> zoeHelpers.getActiveOffers(offerHandles)</h2> <ul><li><code>offerHandle[]</code></li></ul> <p>Returns the offer records, but only if the offer is still active.</p> <h2 id="zoehelpers-rejectoffer-offerhandle"><a href="#zoehelpers-rejectoffer-offerhandle" class="header-anchor">#</a> zoeHelpers.rejectOffer(offerHandle)</h2> <ul><li><code>offerHandle</code></li></ul> <h2 id="zoehelpers-swap-keephandle-tryhandle-keephandleinactivemsg"><a href="#zoehelpers-swap-keephandle-tryhandle-keephandleinactivemsg" class="header-anchor">#</a> zoeHelpers.swap(keepHandle, tryHandle, keepHandleInactiveMsg)</h2> <ul><li><code>keepHandle</code></li> <li><code>tryHandle</code></li> <li><code>keepHandleInactiveMsg</code></li> <li>Returns: defaultAcceptanceMsg</li></ul> <p>In many contracts, we have a particular offer that we want to find a
match for. We will iterate over a number of potential matches, and try
them out to see if the two offers are swappable. The particular offer
that we are trying to find a match for has the handle <code>keepHandle</code>,
and the offer that we are trying out has the handle <code>tryHandle</code>.</p> <p>If the <code>keepOffer</code> is no longer active, we reject the <code>tryOffer</code> with
the <code>keepHandleInactiveMsg</code>.</p> <p>If <code>satisfies</code> returns false for the two offers, we reject the
<code>tryOffer</code>.</p> <p>If <code>satisfies</code> is true, we reallocate with Zoe by swapping the
amounts for the two offers, then we complete both offers so that the
users will receive their payout. Any surplus in the swap remains with the
offer who gave the surplus.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> makeZoeHelpers <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@agoric/zoe/src/contractSupport/zoeHelpers'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span> swap <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">makeZoeHelpers</span><span class="token punctuation">(</span>zoe<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// `firstOfferHandle` is from a prior offer to the contract</span>
  <span class="token keyword">const</span> <span class="token function-variable function">hook</span> <span class="token operator">=</span> <span class="token parameter">newHandle</span> <span class="token operator">=&gt;</span> <span class="token function">swap</span><span class="token punctuation">(</span>firstOfferHandle<span class="token punctuation">,</span> newHandle<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> zcf<span class="token punctuation">.</span><span class="token function">makeInvitation</span><span class="token punctuation">(</span>hook<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="zoehelpers-makeemptyoffer"><a href="#zoehelpers-makeemptyoffer" class="header-anchor">#</a> zoeHelpers.makeEmptyOffer()</h2> <ul><li>Returns: a promise for the new offerHandle</li></ul> <p>Creates an empty offer.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> makeZoeHelpers <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@agoric/zoe/src/contractSupport/zoeHelpers'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span> makeEmptyOffer <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">makeZoeHelpers</span><span class="token punctuation">(</span>zoe<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">makeEmptyOffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">offerHandle</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="zoehelpers-checkhook-offerhook-expected"><a href="#zoehelpers-checkhook-offerhook-expected" class="header-anchor">#</a> zoeHelpers.checkHook(offerHook, expected)</h2> <ul><li><code>offerHook</code> - the function to be called when the offer is made and
invite redeemed</li> <li><code>expected</code> - the expected structure of the proposal for the offer. Values are null.</li> <li>Returns: a new offerHook</li></ul> <p>Create a new offerHook that checks whether the proposal matches the
<code>expected</code> structure before calling the <code>offerHook</code> argument</p> <h2 id="zoehelpers-escrowandallocateto-amount-payment-keyword-recipienthandle"><a href="#zoehelpers-escrowandallocateto-amount-payment-keyword-recipienthandle" class="header-anchor">#</a> zoeHelpers.escrowAndAllocateTo({ amount, payment, keyword, recipientHandle })</h2> <ul><li><code>amount</code> - the amount to be escrowed. This should be equal to the
payment amount</li> <li><code>payment</code> - the payment that will be escrowed</li> <li><code>keyword</code> - the keyword under which the payment should be escrowed.
This will be used to create the proposal and the
paymentKeywordRecord</li> <li><code>recipientHandle</code> - the offerHandle that we will reallocate the
amount to</li> <li>Returns: undefined</li></ul> <p>Escrow a payment with Zoe and reallocate the amount of the payment to a recipient.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> makeZoeHelpers <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@agoric/zoe/src/contractSupport/zoeHelpers'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span> checkHook <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">makeZoeHelpers</span><span class="token punctuation">(</span>zoe<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> expected <span class="token operator">=</span> <span class="token function">harden</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  give<span class="token operator">:</span> <span class="token punctuation">{</span> Asset<span class="token operator">:</span> <span class="token keyword">null</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  want<span class="token operator">:</span> <span class="token punctuation">{</span> Price<span class="token operator">:</span> <span class="token keyword">null</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">return</span> zcf<span class="token punctuation">.</span><span class="token function">makeInvitation</span><span class="token punctuation">(</span>
  <span class="token function">checkHook</span><span class="token punctuation">(</span>internalOfferHook<span class="token punctuation">,</span> expected<span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token string">'firstOffer'</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span> escrowAndAllocateTo <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">makeZoeHelpers</span><span class="token punctuation">(</span>zoe<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">offerHook</span> <span class="token operator">=</span> <span class="token parameter">offerHandle</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// We will send everyone who makes an offer 1000 tokens</span>

  <span class="token keyword">const</span> tokens1000 <span class="token operator">=</span> amountMath<span class="token punctuation">.</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> payment <span class="token operator">=</span> mint<span class="token punctuation">.</span><span class="token function">mintPayment</span><span class="token punctuation">(</span>tokens1000<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// Let's use a helper function which escrows the payment with</span>
  <span class="token comment">// Zoe, and reallocates to the recipientHandle.</span>
  <span class="token keyword">return</span> zoeHelpers
    <span class="token punctuation">.</span><span class="token function">escrowAndAllocateTo</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      amount<span class="token operator">:</span> tokens1000<span class="token punctuation">,</span>
      payment<span class="token punctuation">,</span>
      keyword<span class="token operator">:</span> <span class="token string">'Token'</span><span class="token punctuation">,</span>
      recipientHandle<span class="token operator">:</span> offerHandle<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// Complete the user's offer so that the user gets a payout</span>
      zcf<span class="token punctuation">.</span><span class="token function">complete</span><span class="token punctuation">(</span><span class="token function">harden</span><span class="token punctuation">(</span><span class="token punctuation">[</span>offerHandle<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment">// Since the user is getting the payout through Zoe, we can</span>
      <span class="token comment">// return anything here. Let's return some helpful instructions.</span>
      <span class="token keyword">return</span> <span class="token string">'Offer completed. You should receive a payment from Zoe'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="zoehelpers-satisfies"><a href="#zoehelpers-satisfies" class="header-anchor">#</a> zoeHelpers.satisfies()</h2> <ul><li><code>offerhandle</code>- The offer being checked</li> <li><code>allocation</code> - The allocation checked against the offer's wants.</li> <li>Returns: <code>true</code> if the allocation satisfies the offer, <code>false</code> if not.</li></ul> <p>Checks if an allocation would satisfy a single offer's wants if that was the allocation passed to
<code>reallocate()</code>. This is half of the offer safety check; whether the allocation constitutes a refund
is not checked.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//If `leftOfferHandle' is:</span>
<span class="token comment">//{ give: { Asset: moola(10) },</span>
<span class="token comment">//  want: { Price: simoleans(4) },</span>
<span class="token comment">// giving someone exactly what they want satisifies wants, returns `true`</span>
<span class="token function">satisfies</span><span class="token punctuation">(</span>leftOfferHandle<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  Asset<span class="token operator">:</span> <span class="token function">moola</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  Price<span class="token operator">:</span> <span class="token function">simoleans</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// giving someone less than what they want even with a refund doesn't satisfy wants</span>
<span class="token function">satisfies</span><span class="token punctuation">(</span>leftOfferHandle<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  Asset<span class="token operator">:</span> <span class="token function">moola</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  Price<span class="token operator">:</span> <span class="token function">simoleans</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//giving someone less than what they want even with a refund doesn't satisfy wants      </span>
<span class="token function">satisfies</span><span class="token punctuation">(</span>leftOfferHandle<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  Asset<span class="token operator">:</span> <span class="token function">moola</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  Price<span class="token operator">:</span> <span class="token function">simoleans</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</code></pre></div><h2 id="zoehelpers-isoffersafe"><a href="#zoehelpers-isoffersafe" class="header-anchor">#</a> zoeHelpers.isOfferSafe()</h2> <ul><li><code>offerHandle</code> - Offer being checked.</li> <li><code>allocation</code> - Proposed allocation</li> <li>Returns: <code>true</code> if the allocation is safe for the offer, <code>false</code> otherwise.
checks whether an
allocation for a particular offer would satisfy offer safety. Any
allocation that returns true under <code>satisfies</code> will also return true
under <code>isOfferSafe</code>. (<code>isOfferSafe</code> is equivalent of <code>satisfies</code> logical OR
gives a refund).</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//If `leftOfferHandle` has the proposal</span>
<span class="token comment">//{ give: { Asset: moola(10) },</span>
<span class="token comment">//  want: { Price: simoleans(4) },</span>
<span class="token comment">//Giving someone exactly what they want is offer safe</span>
<span class="token function">isOfferSafe</span><span class="token punctuation">(</span>leftOfferHandle<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  Asset<span class="token operator">:</span> <span class="token function">moola</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  Price<span class="token operator">:</span> <span class="token function">simoleans</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// Giving someone less than what they want and not what they gave is not offer safe</span>
<span class="token function">isOfferSafe</span><span class="token punctuation">(</span>leftOfferHandle<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  Asset<span class="token operator">:</span> <span class="token function">moola</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  Price<span class="token operator">:</span> <span class="token function">simoleans</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token punctuation">,</span>
</code></pre></div><h2 id="zoehelpers-trade-leftitem-rightitem"><a href="#zoehelpers-trade-leftitem-rightitem" class="header-anchor">#</a> zoeHelpers.trade(leftItem, rightItem)</h2> <ul><li><code>leftItem</code> - See below.</li> <li><code>rightItem</code> - See below.</li> <li>Returns: Undefined.</li></ul> <p>The <code>leftItem</code> and <code>rightItem</code> arguments are each a record with keys: <code>offerHandle</code>, <code>gains</code>, and <code>losses</code>
(<code>losses</code> is optional). The value of <code>offerHandle</code> is an <code>offerHandle</code>. <code>gains</code> and <code>losses</code> are <code>amountKeywordRecords</code>
describing declaratively what is added or removed from the allocation for that offer.</p> <p>Performs a trade between two offers given a declarative description of what each side loses
and gains. If the two <code>offerHandle</code> argument parts can trade, then swap their compatible assets, marking both offers as complete.</p> <p>Any surplus remains with the original offer. For example if offer A gives 5 moola and offer B only wants 3 moola, offer A
retains 2 moola.</p> <p>If the first offer argument has already completed and is no longer active, the other offer is rejected with a message.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// If 'leftOfferHandle' has the proposal</span>
<span class="token comment">// {</span>
<span class="token comment">//  give: { Asset: moola(10) },</span>
<span class="token comment">//  want: { Bid: simoleans(4) } }</span>
<span class="token comment">// and `rightOfferHandle` has the proposal</span>
<span class="token comment">// {</span>
<span class="token comment">//  give: { Money: simoleans(6) },</span>
<span class="token comment">//  want: { Items: moola(7) } }</span>
<span class="token comment">// `trade` makes the trade and returns `undefined`</span>
   <span class="token function">trade</span><span class="token punctuation">(</span>
        <span class="token punctuation">{</span>
          offerHandle<span class="token operator">:</span> leftOfferHandle<span class="token punctuation">,</span>
          gains<span class="token operator">:</span> <span class="token punctuation">{</span> Bid<span class="token operator">:</span> <span class="token function">simoleans</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          losses<span class="token operator">:</span> <span class="token punctuation">{</span> Asset<span class="token operator">:</span> <span class="token function">moola</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          offerHandle<span class="token operator">:</span> rightOfferHandle<span class="token punctuation">,</span>
          gains<span class="token operator">:</span> <span class="token punctuation">{</span> Items<span class="token operator">:</span> <span class="token function">moola</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          losses<span class="token operator">:</span> <span class="token punctuation">{</span> Money<span class="token operator">:</span> <span class="token function">simoleans</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/documentation/zoe/api/zoe-contract-facet.html" class="prev">Zoe Contract Facet</a></span> <span class="next"><a href="/documentation/zoe/roadmap/">Zoe Roadmap</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/documentation/assets/js/app.c23e6624.js" defer></script><script src="/documentation/assets/js/2.a254c233.js" defer></script><script src="/documentation/assets/js/49.df22f3e6.js" defer></script>
  </body>
</html>
