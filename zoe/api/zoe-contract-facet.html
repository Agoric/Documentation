<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Zoe Contract Facet | Documentation</title>
    <meta name="generator" content="VuePress 1.5.4">
    <link rel="icon" href="/documentation/favicon-full.ico">
    <script>
    const logoUrlChanger = setInterval(function() {
    //Anchor above the logo image
    const homeEls = document.getElementsByClassName("home-link");
    if(homeEls.length > 0) {
      const homeEl = homeEls[0];
      homeEl.setAttribute("href", "https://agoric.com");
      homeEl.setAttribute("onclick", "return false;");
      clearInterval(logoUrlChanger);
    }

    //Actual logo image
    const logoEls = document.getElementsByClassName("logo")
    if(logoEls.length > 0) {
      const logoEl = logoEls[0]
      logoEl.setAttribute("onclick", "document.location='https://agoric.com';return false;");
      clearInterval(logoUrlChanger);
    }
   }, 1000) </script>
    <meta name="description" content="Secure smart contracts">
    <link rel="preload" href="/documentation/assets/css/0.styles.ca7d8779.css" as="style"><link rel="preload" href="/documentation/assets/js/app.371aafe1.js" as="script"><link rel="preload" href="/documentation/assets/js/2.8bbaee0a.js" as="script"><link rel="preload" href="/documentation/assets/js/49.a07ecfba.js" as="script"><link rel="preload" href="/documentation/assets/js/11.6c857f36.js" as="script"><link rel="prefetch" href="/documentation/assets/js/10.453a8393.js"><link rel="prefetch" href="/documentation/assets/js/12.d340e5db.js"><link rel="prefetch" href="/documentation/assets/js/13.1e7ac300.js"><link rel="prefetch" href="/documentation/assets/js/14.58d8b024.js"><link rel="prefetch" href="/documentation/assets/js/15.cc5a16d7.js"><link rel="prefetch" href="/documentation/assets/js/16.e2b2b424.js"><link rel="prefetch" href="/documentation/assets/js/17.1857ce7c.js"><link rel="prefetch" href="/documentation/assets/js/18.3269b133.js"><link rel="prefetch" href="/documentation/assets/js/19.900750a9.js"><link rel="prefetch" href="/documentation/assets/js/20.c7efa164.js"><link rel="prefetch" href="/documentation/assets/js/21.79bfa4a8.js"><link rel="prefetch" href="/documentation/assets/js/22.67700c2d.js"><link rel="prefetch" href="/documentation/assets/js/23.093b16e6.js"><link rel="prefetch" href="/documentation/assets/js/24.f98eeb9a.js"><link rel="prefetch" href="/documentation/assets/js/25.5c33cd11.js"><link rel="prefetch" href="/documentation/assets/js/26.fd623a23.js"><link rel="prefetch" href="/documentation/assets/js/27.9d2900a6.js"><link rel="prefetch" href="/documentation/assets/js/28.4b850069.js"><link rel="prefetch" href="/documentation/assets/js/29.6d8591ac.js"><link rel="prefetch" href="/documentation/assets/js/3.f6372712.js"><link rel="prefetch" href="/documentation/assets/js/30.5e556acf.js"><link rel="prefetch" href="/documentation/assets/js/31.aca63d33.js"><link rel="prefetch" href="/documentation/assets/js/32.a07b9545.js"><link rel="prefetch" href="/documentation/assets/js/33.37584100.js"><link rel="prefetch" href="/documentation/assets/js/34.62cb3a7e.js"><link rel="prefetch" href="/documentation/assets/js/35.945b9bfc.js"><link rel="prefetch" href="/documentation/assets/js/36.2c2206b2.js"><link rel="prefetch" href="/documentation/assets/js/37.d05ef7ae.js"><link rel="prefetch" href="/documentation/assets/js/38.d44f3d5e.js"><link rel="prefetch" href="/documentation/assets/js/39.8ef489d9.js"><link rel="prefetch" href="/documentation/assets/js/4.2dc1034f.js"><link rel="prefetch" href="/documentation/assets/js/40.3d0bf31e.js"><link rel="prefetch" href="/documentation/assets/js/41.35939387.js"><link rel="prefetch" href="/documentation/assets/js/42.350b6aa9.js"><link rel="prefetch" href="/documentation/assets/js/43.9e82815e.js"><link rel="prefetch" href="/documentation/assets/js/44.ddf00f9d.js"><link rel="prefetch" href="/documentation/assets/js/45.39bec912.js"><link rel="prefetch" href="/documentation/assets/js/46.cde019b0.js"><link rel="prefetch" href="/documentation/assets/js/47.69de7edf.js"><link rel="prefetch" href="/documentation/assets/js/48.75205f6b.js"><link rel="prefetch" href="/documentation/assets/js/5.f153641a.js"><link rel="prefetch" href="/documentation/assets/js/50.f62dff89.js"><link rel="prefetch" href="/documentation/assets/js/51.c71fe460.js"><link rel="prefetch" href="/documentation/assets/js/52.1eba400f.js"><link rel="prefetch" href="/documentation/assets/js/53.38842952.js"><link rel="prefetch" href="/documentation/assets/js/54.34d9b2b1.js"><link rel="prefetch" href="/documentation/assets/js/55.5b764a8f.js"><link rel="prefetch" href="/documentation/assets/js/56.6404286b.js"><link rel="prefetch" href="/documentation/assets/js/57.24eb9baa.js"><link rel="prefetch" href="/documentation/assets/js/58.4d38de05.js"><link rel="prefetch" href="/documentation/assets/js/59.3bf7ea55.js"><link rel="prefetch" href="/documentation/assets/js/6.71700d55.js"><link rel="prefetch" href="/documentation/assets/js/60.1c347da6.js"><link rel="prefetch" href="/documentation/assets/js/61.9d73fe47.js"><link rel="prefetch" href="/documentation/assets/js/62.76993b0a.js"><link rel="prefetch" href="/documentation/assets/js/63.93006370.js"><link rel="prefetch" href="/documentation/assets/js/7.d840b447.js"><link rel="prefetch" href="/documentation/assets/js/8.5f9e5a19.js"><link rel="prefetch" href="/documentation/assets/js/9.26470848.js">
    <link rel="stylesheet" href="/documentation/assets/css/0.styles.ca7d8779.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/documentation/" class="home-link router-link-active"><img src="/documentation/logo.svg" alt="Documentation" class="logo"> <span class="site-name can-hide">Documentation</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Getting Started Menu" class="dropdown-title"><span class="title">Getting Started</span> <span class="arrow down"></span></button> <button type="button" aria-label="Getting Started Menu" class="mobile-dropdown-title"><span class="title">Getting Started</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/documentation/getting-started/" class="nav-link">
  Documentation Guide
</a></li><li class="dropdown-item"><!----> <a href="/documentation/getting-started/before-using-agoric.html" class="nav-link">
  Before Using Agoric
</a></li><li class="dropdown-item"><!----> <a href="/documentation/getting-started/start-a-project.html" class="nav-link">
  Starting a Project
</a></li><li class="dropdown-item"><!----> <a href="/documentation/getting-started/development-cycle.html" class="nav-link">
  Development Cycle
</a></li><li class="dropdown-item"><!----> <a href="/documentation/getting-started/deploying.html" class="nav-link">
  Deploying Smart Contracts
</a></li><li class="dropdown-item"><!----> <a href="/documentation/getting-started/ertp-introduction.html" class="nav-link">
  ERTP Introduction
</a></li><li class="dropdown-item"><!----> <a href="/documentation/getting-started/intro-zoe.html" class="nav-link">
  Zoe Introduction
</a></li><li class="dropdown-item"><!----> <a href="/documentation/getting-started/agoric-cli-guide.html" class="nav-link">
  Agoric CLI Guide
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Guides" class="dropdown-title"><span class="title">Guides</span> <span class="arrow down"></span></button> <button type="button" aria-label="Guides" class="mobile-dropdown-title"><span class="title">Guides</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/documentation/getting-started/" class="nav-link">
  Documentation
</a></li><li class="dropdown-item"><!----> <a href="/documentation/getting-started/agoric-cli-guide/" class="nav-link">
  Agoric CLI
</a></li><li class="dropdown-item"><!----> <a href="/documentation/dapps/" class="nav-link">
  Agoric Dapps
</a></li><li class="dropdown-item"><!----> <a href="/documentation/ertp/guide/" class="nav-link">
  ERTP
</a></li><li class="dropdown-item"><!----> <a href="/documentation/zoe/guide/" class="nav-link">
  Zoe
</a></li><li class="dropdown-item"><!----> <a href="/documentation/wallet-api.html" class="nav-link">
  Wallet API
</a></li><li class="dropdown-item"><!----> <a href="https://github.com/Agoric/agoric-sdk/blob/master/packages/SwingSet/docs/networking.md" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Dynamic IBC (dIBC)
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="/documentation/distributed-programming.html" class="nav-link">
  JS Distributed Programming
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Zoe Menu" class="dropdown-title"><span class="title">Zoe</span> <span class="arrow down"></span></button> <button type="button" aria-label="Zoe Menu" class="mobile-dropdown-title"><span class="title">Zoe</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/documentation/getting-started/intro-zoe.html" class="nav-link">
  Introduction
</a></li><li class="dropdown-item"><!----> <a href="/documentation/zoe/guide/" class="nav-link">
  Guide
</a></li><li class="dropdown-item"><!----> <a href="/documentation/zoe/guide/contracts/autoswap.html" class="nav-link">
  Contracts
</a></li><li class="dropdown-item"><!----> <a href="/documentation/zoe/api/" class="nav-link router-link-active">
  API
</a></li><li class="dropdown-item"><!----> <a href="https://github.com/Agoric/agoric-sdk/tree/master/packages/zoe" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ERTP Menu" class="dropdown-title"><span class="title">ERTP</span> <span class="arrow down"></span></button> <button type="button" aria-label="ERTP Menu" class="mobile-dropdown-title"><span class="title">ERTP</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/documentation/getting-started/ertp-introduction/" class="nav-link">
  Introduction
</a></li><li class="dropdown-item"><!----> <a href="/documentation/ertp/guide/" class="nav-link">
  Guide
</a></li><li class="dropdown-item"><!----> <a href="/documentation/ertp/api/" class="nav-link">
  API
</a></li><li class="dropdown-item"><!----> <a href="https://github.com/Agoric/agoric-sdk/tree/master/packages/ERTP" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Platform Menu" class="dropdown-title"><span class="title">Platform</span> <span class="arrow down"></span></button> <button type="button" aria-label="Platform Menu" class="mobile-dropdown-title"><span class="title">Platform</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/documentation/platform/" class="nav-link">
  Agoric Stack
</a></li></ul></div></div><div class="nav-item"><a href="/documentation/glossary/" class="nav-link">
  Glossary
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Learn More Menu" class="dropdown-title"><span class="title">Learn More</span> <span class="arrow down"></span></button> <button type="button" aria-label="Learn More Menu" class="mobile-dropdown-title"><span class="title">Learn More</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://agoric.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Agoric
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://agoric.com/papers/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Papers
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/Agoric/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Getting Started Menu" class="dropdown-title"><span class="title">Getting Started</span> <span class="arrow down"></span></button> <button type="button" aria-label="Getting Started Menu" class="mobile-dropdown-title"><span class="title">Getting Started</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/documentation/getting-started/" class="nav-link">
  Documentation Guide
</a></li><li class="dropdown-item"><!----> <a href="/documentation/getting-started/before-using-agoric.html" class="nav-link">
  Before Using Agoric
</a></li><li class="dropdown-item"><!----> <a href="/documentation/getting-started/start-a-project.html" class="nav-link">
  Starting a Project
</a></li><li class="dropdown-item"><!----> <a href="/documentation/getting-started/development-cycle.html" class="nav-link">
  Development Cycle
</a></li><li class="dropdown-item"><!----> <a href="/documentation/getting-started/deploying.html" class="nav-link">
  Deploying Smart Contracts
</a></li><li class="dropdown-item"><!----> <a href="/documentation/getting-started/ertp-introduction.html" class="nav-link">
  ERTP Introduction
</a></li><li class="dropdown-item"><!----> <a href="/documentation/getting-started/intro-zoe.html" class="nav-link">
  Zoe Introduction
</a></li><li class="dropdown-item"><!----> <a href="/documentation/getting-started/agoric-cli-guide.html" class="nav-link">
  Agoric CLI Guide
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Guides" class="dropdown-title"><span class="title">Guides</span> <span class="arrow down"></span></button> <button type="button" aria-label="Guides" class="mobile-dropdown-title"><span class="title">Guides</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/documentation/getting-started/" class="nav-link">
  Documentation
</a></li><li class="dropdown-item"><!----> <a href="/documentation/getting-started/agoric-cli-guide/" class="nav-link">
  Agoric CLI
</a></li><li class="dropdown-item"><!----> <a href="/documentation/dapps/" class="nav-link">
  Agoric Dapps
</a></li><li class="dropdown-item"><!----> <a href="/documentation/ertp/guide/" class="nav-link">
  ERTP
</a></li><li class="dropdown-item"><!----> <a href="/documentation/zoe/guide/" class="nav-link">
  Zoe
</a></li><li class="dropdown-item"><!----> <a href="/documentation/wallet-api.html" class="nav-link">
  Wallet API
</a></li><li class="dropdown-item"><!----> <a href="https://github.com/Agoric/agoric-sdk/blob/master/packages/SwingSet/docs/networking.md" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Dynamic IBC (dIBC)
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="/documentation/distributed-programming.html" class="nav-link">
  JS Distributed Programming
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Zoe Menu" class="dropdown-title"><span class="title">Zoe</span> <span class="arrow down"></span></button> <button type="button" aria-label="Zoe Menu" class="mobile-dropdown-title"><span class="title">Zoe</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/documentation/getting-started/intro-zoe.html" class="nav-link">
  Introduction
</a></li><li class="dropdown-item"><!----> <a href="/documentation/zoe/guide/" class="nav-link">
  Guide
</a></li><li class="dropdown-item"><!----> <a href="/documentation/zoe/guide/contracts/autoswap.html" class="nav-link">
  Contracts
</a></li><li class="dropdown-item"><!----> <a href="/documentation/zoe/api/" class="nav-link router-link-active">
  API
</a></li><li class="dropdown-item"><!----> <a href="https://github.com/Agoric/agoric-sdk/tree/master/packages/zoe" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ERTP Menu" class="dropdown-title"><span class="title">ERTP</span> <span class="arrow down"></span></button> <button type="button" aria-label="ERTP Menu" class="mobile-dropdown-title"><span class="title">ERTP</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/documentation/getting-started/ertp-introduction/" class="nav-link">
  Introduction
</a></li><li class="dropdown-item"><!----> <a href="/documentation/ertp/guide/" class="nav-link">
  Guide
</a></li><li class="dropdown-item"><!----> <a href="/documentation/ertp/api/" class="nav-link">
  API
</a></li><li class="dropdown-item"><!----> <a href="https://github.com/Agoric/agoric-sdk/tree/master/packages/ERTP" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Platform Menu" class="dropdown-title"><span class="title">Platform</span> <span class="arrow down"></span></button> <button type="button" aria-label="Platform Menu" class="mobile-dropdown-title"><span class="title">Platform</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/documentation/platform/" class="nav-link">
  Agoric Stack
</a></li></ul></div></div><div class="nav-item"><a href="/documentation/glossary/" class="nav-link">
  Glossary
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Learn More Menu" class="dropdown-title"><span class="title">Learn More</span> <span class="arrow down"></span></button> <button type="button" aria-label="Learn More Menu" class="mobile-dropdown-title"><span class="title">Learn More</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://agoric.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Agoric
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://agoric.com/papers/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Papers
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/Agoric/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/documentation/getting-started/intro-zoe.html" class="sidebar-link">Zoe Introduction</a></li><li><section class="sidebar-group depth-0"><a href="/documentation/zoe/guide/" class="sidebar-heading clickable"><span>Zoe Guide</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/documentation/zoe/guide/" class="sidebar-link">Zoe: Offer-Safety Enforcement</a></li><li><a href="/documentation/zoe/guide/offer-safety.html" class="sidebar-link">Offer Safety</a></li><li><a href="/documentation/zoe/guide/proposal.html" class="sidebar-link">The Structure of Proposals</a></li><li><a href="/documentation/zoe/guide/contract-requirements.html" class="sidebar-link">Contract Requirements</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/documentation/zoe/guide/contracts/" class="sidebar-heading clickable"><span>Zoe Contracts</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/documentation/zoe/guide/contracts/atomic-swap.html" class="sidebar-link">Atomic Swap</a></li><li><a href="/documentation/zoe/guide/contracts/autoswap.html" class="sidebar-link">Autoswap</a></li><li><a href="/documentation/zoe/guide/contracts/covered-call.html" class="sidebar-link">Covered Call</a></li><li><a href="/documentation/zoe/guide/contracts/second-price-auction.html" class="sidebar-link">Second-price auction</a></li><li><a href="/documentation/zoe/guide/contracts/simple-exchange.html" class="sidebar-link">Simple Exchange</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/documentation/zoe/api/" class="sidebar-heading clickable router-link-active open"><span>Zoe API</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/documentation/zoe/api/zoe.html" class="sidebar-link">Zoe</a></li><li><a href="/documentation/zoe/api/records.html" class="sidebar-link">Records</a></li><li><a href="/documentation/zoe/api/zoe-contract-facet.html" aria-current="page" class="active sidebar-link">Zoe Contract Facet</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/documentation/zoe/api/zoe-contract-facet.html#start" class="sidebar-link">start</a></li><li class="sidebar-sub-header"><a href="/documentation/zoe/api/zoe-contract-facet.html#zcf-makezcfmint-keyword-amountmathkind" class="sidebar-link">zcf.makeZCFMint(keyword, amountMathKind)</a></li><li class="sidebar-sub-header"><a href="/documentation/zoe/api/zoe-contract-facet.html#zcf-getinvitationissuer" class="sidebar-link">zcf.getInvitationIssuer()</a></li><li class="sidebar-sub-header"><a href="/documentation/zoe/api/zoe-contract-facet.html#zcf-saveissuer-issuer-keyword" class="sidebar-link">zcf.saveIssuer(issuer, keyword)</a></li><li class="sidebar-sub-header"><a href="/documentation/zoe/api/zoe-contract-facet.html#zcf-makeinvitation-offerhandler-description-customproperties" class="sidebar-link">zcf.makeInvitation(offerHandler, description, customProperties)</a></li><li class="sidebar-sub-header"><a href="/documentation/zoe/api/zoe-contract-facet.html#zcf-makeemptyseatkit" class="sidebar-link">zcf.makeEmptySeatKit()</a></li><li class="sidebar-sub-header"><a href="/documentation/zoe/api/zoe-contract-facet.html#zcf-getbrandforissuer-issuer" class="sidebar-link">zcf.getBrandForIssuer(issuer)</a></li><li class="sidebar-sub-header"><a href="/documentation/zoe/api/zoe-contract-facet.html#zcf-getissuerforbrand-brand" class="sidebar-link">zcf.getIssuerForBrand(brand)</a></li><li class="sidebar-sub-header"><a href="/documentation/zoe/api/zoe-contract-facet.html#zcf-getamountmath-brand" class="sidebar-link">zcf.getAmountMath(brand)</a></li><li class="sidebar-sub-header"><a href="/documentation/zoe/api/zoe-contract-facet.html#zcf-shutdown" class="sidebar-link">zcf.shutdown()</a></li><li class="sidebar-sub-header"><a href="/documentation/zoe/api/zoe-contract-facet.html#zcf-getterms" class="sidebar-link">zcf.getTerms()</a></li><li class="sidebar-sub-header"><a href="/documentation/zoe/api/zoe-contract-facet.html#zcf-getzoeservice" class="sidebar-link">zcf.getZoeService()</a></li><li class="sidebar-sub-header"><a href="/documentation/zoe/api/zoe-contract-facet.html#zcf-assertuniquekeyword-keyword" class="sidebar-link">zcf.assertUniqueKeyword(keyword)</a></li><li class="sidebar-sub-header"><a href="/documentation/zoe/api/zoe-contract-facet.html#zcf-reallocate-seatstagings" class="sidebar-link">zcf.reallocate(seatStagings)</a></li></ul></li><li><a href="/documentation/zoe/api/zoe-helpers.html" class="sidebar-link">ZoeHelpers</a></li></ul></section></li><li><a href="/documentation/zoe/roadmap/" class="sidebar-link">Zoe Roadmap</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="zoe-contract-facet"><a href="#zoe-contract-facet" class="header-anchor">#</a> Zoe Contract Facet</h1> <div class="zoe-version">
    Zoe v0.5.0. Last updated
    4/20/2020.
</div> <p>A Zoe Contract Facet is an API object for a running contract instance to access the Zoe state
for that instance. A Zoe Contract Facet is accessed synchronously from within the contract,
and usually is referred to in code as <code>zcf</code>.</p> <p>The contract instance is launched by <code>E(zoe).startInstance</code>, and is given access to
the <code>zcf</code> object during that launch. In the operations below, <code>instance</code> is
the handle for the running contract instance.</p> <h2 id="start"><a href="#start" class="header-anchor">#</a> start</h2> <p>This section covers the code you need to have at the start of your contract code.</p> <p>To warn if the correct return values for your contract are not being returned,
add this right before the start of your contract code. It also lets TypeScript-aware
tools (IDEs like vsCode and WebStorm) inform the developer about required parameters
and return values and warn when methods are misused.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * @type {ContractStartFn}
 */</span>
</code></pre></div><p>Your contract code must export a function <code>start</code> as a non-default export.
<code>zcf</code> is the Zoe Contract Facet and is the only argument provided to the contract</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">start</span> <span class="token operator">=</span> <span class="token parameter">zcf</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
  <span class="token comment">// your code here</span>
  <span class="token keyword">return</span> <span class="token function">harden</span><span class="token punctuation">(</span><span class="token punctuation">{</span> creatorFacet<span class="token punctuation">,</span> creatorInvitation<span class="token punctuation">,</span> publicFacet <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">harden</span><span class="token punctuation">(</span>start<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span> start <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>The contract must return a record with any (or none) of the following:</p> <ul><li><code>creatorFacet</code> - an object, usually with admin authority. It is only given to the entity that
calls <code>E(zoe).startInstance(...)</code>; i.e. the party that was the creator of the current contract instance.
It creates invitations for other parties, and takes actions that are unrelated to making offers.</li> <li><code>creatorInvitation</code> - a Zoe invitation only given to the entity that calls <code>E(zoe).startInstance(...)</code>; i.e.
the party that was the creator of the current contract instance.
This is usually used when a party has to make an offer first, such as escrowing the underlying good
for sale in an auction or covered call.</li> <li><code>publicFacet</code> - an object available through Zoe to anyone who knows the contract <code>instance</code>. Use the <code>publicFacet</code> for general queries and actions, such as getting the current price or creating public invitations.</li></ul> <h2 id="zcf-makezcfmint-keyword-amountmathkind"><a href="#zcf-makezcfmint-keyword-amountmathkind" class="header-anchor">#</a> zcf.makeZCFMint(keyword, amountMathKind)</h2> <ul><li><code>keyword</code> <code>{String}</code></li> <li><code>amountMathKind</code> <code>{AmountMathKind}</code> (defaults to <code>MathKind.NAT</code>)</li> <li>Returns: <code>{Promise&lt;ZCFMint&gt;}</code></li></ul> <p>Creates a synchronous Zoe mint, allowing users to mint and reallocate digital assets synchronously
instead of relying on an asynchronous ERTP <code>mint</code>.</p> <p><strong>Important</strong>: <code>ZCFMints</code> do <strong>not</strong> have the same methods as an ERTP <code>mint</code>. Do not try to use
ERTP methods on a <code>ZCFMint</code> or vice versa.</p> <p><strong>Important</strong>: On the other hand, the <code>issuer</code>, <code>brand</code>, and <code>amountMath</code> associated with a <code>zcfMint</code>
do have the same methods as their ERTP-derived counterparts. Assets created by a <code>zcfMint</code> are treated
the same as ERTP <code>mint</code>-created assets by ERTP methods.</p> <p><code>ZCFMints</code> have three methods:</p> <ul><li><code>getIssuerRecord()</code> <ul><li>Returns: <code>{IssuerRecord}</code></li> <li>Returns an <code>issuerRecord</code> containing the <code>issuer</code>, <code>brand</code>, or <code>amountMath</code> associated with the <code>zcfMint</code>.</li></ul></li> <li><code>mintGains</code> <ul><li><code>gains</code>: <code>AmountKeywordRecord</code></li> <li><code>zcfSeat</code> <code>{ZCFSeat}</code> - optional</li> <li>Returns: <code>{ZCFSeat}</code></li> <li>All <code>amounts</code> in <code>gains</code> must be of this <code>ZCFMint</code>'s <code>brand</code>.
The <code>gains</code>' keywords are in that seat's namespace.
Add the <code>gains</code> to that seat's <code>allocation</code>, then
mint that <code>amount</code> of assets and assign it to the contract.
If a <code>seat</code> is provided, it is returned. Otherwise a new <code>seat</code> is
returned.</li> <li><code>zcfMint.mintGains({ Token: amount }, seat);</code></li></ul></li> <li><code>burnlosses</code> <ul><li><code>losses</code>: <code>AmountKeyWordRecord</code></li> <li><code>zcfSeat</code> : <code>{ZCFSeat}</code></li> <li>Returns: void</li> <li>All <code>amounts</code> in <code>losses</code> must be of this <code>ZCFMint</code>'s <code>brand</code>.
The <code>losses</code>' keywords are in that <code>seat</code>'s namespace.
Subtract <code>losses</code> from that <code>seat</code>'s <code>allocation</code>, then
burn that <code>amount</code> of assets from the pooled <code>purse</code>.</li> <li><code>zcfMint.burnLosses({ Token: amount }, seat);</code></li></ul></li></ul> <p><strong>Note</strong>: The call to make the <code>ZCFMint</code> is asynchronous, but
calls to the resulting <code>ZCFMint</code> are synchronous.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> mySynchronousMint <span class="token operator">=</span> <span class="token keyword">await</span> zcf<span class="token punctuation">.</span><span class="token function">makeZCFMint</span><span class="token punctuation">(</span><span class="token string">'MySyncMint'</span><span class="token punctuation">,</span> <span class="token string">'set'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> amountMath<span class="token punctuation">,</span> brand<span class="token punctuation">,</span> issuer <span class="token punctuation">}</span> <span class="token operator">=</span> mySynchronousMint<span class="token punctuation">.</span><span class="token function">getIssuerRecord</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
mySynchronousMint<span class="token punctuation">.</span><span class="token function">mintGains</span><span class="token punctuation">(</span><span class="token punctuation">{</span> MyKeyword<span class="token operator">:</span> amount <span class="token punctuation">}</span><span class="token punctuation">,</span> seat<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="zcf-getinvitationissuer"><a href="#zcf-getinvitationissuer" class="header-anchor">#</a> zcf.getInvitationIssuer()</h2> <ul><li>Returns: <a href="/documentation/ertp/api/issuer.html"><code>{Issuer}</code></a></li></ul> <p>Zoe has a single <code>invitationIssuer</code> for the entirety of its
lifetime. This method returns the Zoe <code>InvitationIssuer</code>, which
validates user-received <code>invitations</code> to participate
in contract instances.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> invitationIssuer <span class="token operator">=</span> <span class="token keyword">await</span> zcf<span class="token punctuation">.</span><span class="token function">getInvitationIssuer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="zcf-saveissuer-issuer-keyword"><a href="#zcf-saveissuer-issuer-keyword" class="header-anchor">#</a> zcf.saveIssuer(issuer, keyword)</h2> <ul><li><code>issuer</code> <code>{Issuer}</code></li> <li><code>keyword</code> <code>{String}</code></li> <li>Returns: <code>{Promise&lt;IssuerRecord&gt;}</code></li></ul> <p>Informs Zoe about an <code>issuer</code> and returns a <code>promise</code> for acknowledging
when the <code>issuer</code> is added and ready. The <code>keyword</code> is the one associated
with the new <code>issuer</code>. It returns a promise for <code>issuerRecord</code> of the new <code>issuer</code></p> <p>This saves an <code>issuer</code> to Zoe.
It also has saved the <code>issuer</code> information such that Zoe can handle offers involving
this <code>issuer</code> and ZCF can provide the <code>issuerRecord</code> (<code>amountMath</code>, <code>brand</code>, <code>issuer</code>)
synchronously on request.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">await</span> zcf<span class="token punctuation">.</span><span class="token function">saveIssuer</span><span class="token punctuation">(</span>secondaryIssuer<span class="token punctuation">,</span> keyword<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="zcf-makeinvitation-offerhandler-description-customproperties"><a href="#zcf-makeinvitation-offerhandler-description-customproperties" class="header-anchor">#</a> zcf.makeInvitation(offerHandler, description, customProperties)</h2> <ul><li><code>offerHandler</code> <code>{OfferHandle =&gt; Object}</code></li> <li><code>description</code> <code>{String}</code></li> <li><code>customProperties</code> <code>{Object}</code></li> <li>Returns: <a href="/documentation/ertp/api/payment.html#payment"><code>{Promise&lt;Invitation&gt;}</code></a></li></ul> <p>Make a credible Zoe <code>invitation</code> for a smart contract. Note that <code>invitations</code> are a special case
of an ERTP <code>payment</code>. They are in a one-to-one relationship with the <code>invitationIssuer</code>, which is used
to validate invitations and their <code>amounts</code>.</p> <p>The <code>invitation</code>'s
<code>value</code> specifies:</p> <ul><li>The specific contract <code>instance</code>.</li> <li>The Zoe <code>installation</code>.</li> <li>A unique <code>handle</code></li></ul> <p>The second argument is a required <code>description</code> for the <code>invitation</code>,
and should include whatever information is needed for a potential recipient of the <code>invitation</code>
to know what they are getting in the optional <code>customProperties</code> argument, which is
put in the <code>invitation</code>'s <code>value</code>.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> creatorInvitation <span class="token operator">=</span> zcf<span class="token punctuation">.</span><span class="token function">makeInvitation</span><span class="token punctuation">(</span>makeCallOption<span class="token punctuation">,</span> <span class="token string">'makeCallOption'</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="zcf-makeemptyseatkit"><a href="#zcf-makeemptyseatkit" class="header-anchor">#</a> zcf.makeEmptySeatKit()</h2> <ul><li>Returns: <code>{ZCFSeatRecord, Promise&lt;UserSeat&gt;}</code></li></ul> <p>Returns an empty <code>zcfSeatRecord</code> and a <code>promise</code> for a <code>userSeat</code></p> <p>Zoe uses <code>seats</code> to represent offers, and has two <code>seat</code> facets (a particular view or API of an object;
there may be multiple such APIs per object) a <code>ZCFSeat</code> and a <code>UserSeat</code>.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> zcfSeat<span class="token operator">:</span> mySeat <span class="token punctuation">}</span> <span class="token operator">=</span> zcf<span class="token punctuation">.</span><span class="token function">makeEmptySeatKit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="zcf-getbrandforissuer-issuer"><a href="#zcf-getbrandforissuer-issuer" class="header-anchor">#</a> zcf.getBrandForIssuer(issuer)</h2> <ul><li><code>issuer</code> <code>{Issuer}</code></li> <li>Returns: <code>{Brand}</code></li></ul> <p>Returns the <code>brand</code> associated with the <code>issuer</code>.</p> <h2 id="zcf-getissuerforbrand-brand"><a href="#zcf-getissuerforbrand-brand" class="header-anchor">#</a> zcf.getIssuerForBrand(brand)</h2> <ul><li><code>brand</code> <code>{Brand}</code></li> <li>Returns: <code>{Issuer}</code></li></ul> <p>Returns the <code>issuer</code> of the <code>brand</code> argument.</p> <h2 id="zcf-getamountmath-brand"><a href="#zcf-getamountmath-brand" class="header-anchor">#</a> zcf.getAmountMath(brand)</h2> <ul><li><code>brand</code> <code>{String}</code></li> <li>Returns: <code>{amountMath}</code></li></ul> <p>Returns the <code>amountMath</code> object associated with the <code>brand</code> argument.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> assetAmountMath <span class="token operator">=</span> zcf<span class="token punctuation">.</span><span class="token function">getAmountMath</span><span class="token punctuation">(</span>assetAmount<span class="token punctuation">.</span>brand<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="zcf-shutdown"><a href="#zcf-shutdown" class="header-anchor">#</a> zcf.shutdown()</h2> <p><strong>Note</strong>: Still in development, use at your own risk.</p> <p>Shuts down the entire vat and gives payouts.</p> <p>This exits all <code>seats</code> associated with the current <code>instance</code>,
giving them their payouts.</p> <p>Call when:</p> <ul><li>You want nothing more to happen in the contract, and</li> <li>You don't want to take any more offers</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>zcf<span class="token punctuation">.</span><span class="token function">shutdown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="zcf-getterms"><a href="#zcf-getterms" class="header-anchor">#</a> zcf.getTerms()</h2> <ul><li>Returns: <code>{Object}</code></li></ul> <p>Returns the <code>issuers</code>, <code>brands</code>, and custom <code>terms</code> the current contract instance was instantiated with.</p> <p>Note that there is also an <code>E(zoe).getTerms(instance)</code>. Often the choice of which to use is not which method
to use, but which of Zoe Service or ZCF you have access to. On the contract side, you more easily have access
to <code>zcf</code>, and <code>zcf</code> already knows what instance is running. So in contract code, you use <code>zcf.getTerms()</code>. From
a user side, with access to Zoe Service, you use <code>E(zoe).getTerms()</code>.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> brands<span class="token punctuation">,</span> issuers<span class="token punctuation">,</span> terms <span class="token punctuation">}</span> <span class="token operator">=</span> zcf<span class="token punctuation">.</span><span class="token function">getTerms</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="zcf-getzoeservice"><a href="#zcf-getzoeservice" class="header-anchor">#</a> zcf.getZoeService()</h2> <ul><li>Returns: <a href="/documentation/zoe/api/zoe.html#zoe"><code>{ZoeService}</code></a></li></ul> <p>This is the only way to get the user-facing <a href="/documentation/zoe/api/zoe.html#zoe">Zoe Service API</a> to
the contract code as well.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Making an offer to another contract instance in the contract.</span>
<span class="token keyword">const</span> zoeService <span class="token operator">=</span> zcf<span class="token punctuation">.</span><span class="token function">getZoeService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">E</span><span class="token punctuation">(</span>zoeService<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">offer</span><span class="token punctuation">(</span>creatorInvitation<span class="token punctuation">,</span> proposal<span class="token punctuation">,</span> paymentKeywordRecord<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="zcf-assertuniquekeyword-keyword"><a href="#zcf-assertuniquekeyword-keyword" class="header-anchor">#</a> zcf.assertUniqueKeyword(keyword)</h2> <ul><li><code>keyword</code> <code>{String}</code></li> <li>Returns: Undefined</li></ul> <p>Checks if a keyword is valid and not already used as a <code>brand</code> in this <code>instance</code> (i.e. unique)
and could be used as a new <code>brand</code> to make an <code>issuer</code>. Throws an appropriate error if it's not
a valid keyword, or is not unique.</p> <div class="language-js extra-class"><pre class="language-js"><code>zcf<span class="token punctuation">.</span><span class="token function">assertUniqueKeyword</span><span class="token punctuation">(</span>keyword<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="zcf-reallocate-seatstagings"><a href="#zcf-reallocate-seatstagings" class="header-anchor">#</a> zcf.reallocate(seatStagings)</h2> <ul><li><code>seatStagings</code> <code>{SeatStaging[]}</code> (at least two)</li> <li>Returns: <code>{void}</code></li></ul> <p>The contract reallocates over <code>seatStagings</code>, which are
associations of <code>seats</code> with new <code>allocations</code> to be used in reallocation.
There must be at least two <code>seatStagings</code> in the array argument.</p> <p>The reallocation only succeeds if it:</p> <ol><li>Conserves rights (the specified <code>amounts</code> have the same total value as the
current total amount)</li> <li>Is 'offer-safe' for all parties
involved. Offer safety is checked at the staging step.</li></ol> <p>The reallocation is partial, only applying to <code>seats</code> associated
with the <code>seatStagings</code>. By induction, if rights conservation and
offer safety hold before, they hold after a safe reallocation.</p> <p>This is true even though we only re-validate for <code>seats</code> whose
<code>allocations</code> change. A reallocation can only effect offer safety for
those <code>seats</code>, and since rights are conserved for the change, overall
rights are unchanged.</p> <p><code>reallocate()</code> throws these errors:</p> <ul><li><code>reallocating must be done over two or more seats</code></li> <li><code>The seatStaging was not recognized</code></li> <li><code>The seatStaging was not recognized</code></li> <li><code>keyword must be unique</code></li> <li>If the total <code>amount</code> per <code>brand</code> is not equal to the total <code>amount</code> per <code>brand</code>
in the proposed reallocation. (no message)</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>zcf<span class="token punctuation">.</span><span class="token function">reallocate</span><span class="token punctuation">(</span>
    seat<span class="token punctuation">.</span><span class="token function">stage</span><span class="token punctuation">(</span>seatAAllocation<span class="token punctuation">)</span><span class="token punctuation">,</span>
    seat<span class="token punctuation">.</span><span class="token function">stage</span><span class="token punctuation">(</span>seatBAllocation<span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/documentation/zoe/api/records.html" class="prev">
        Records
      </a></span> <span class="next"><a href="/documentation/zoe/api/zoe-helpers.html">
        ZoeHelpers
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/documentation/assets/js/app.371aafe1.js" defer></script><script src="/documentation/assets/js/2.8bbaee0a.js" defer></script><script src="/documentation/assets/js/49.a07ecfba.js" defer></script><script src="/documentation/assets/js/11.6c857f36.js" defer></script>
  </body>
</html>
