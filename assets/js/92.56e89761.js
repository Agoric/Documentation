(window.webpackJsonp=window.webpackJsonp||[]).push([[92],{496:function(e,t,a){"use strict";a.r(t);var n=a(41),o=Object(n.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"offer-safety"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#offer-safety"}},[e._v("#")]),e._v(" Offer Safety")]),e._v(" "),a("Zoe-Version"),e._v(" "),a("p",[a("strong",[e._v("Definition")]),e._v(": "),a("em",[e._v("Offer safety")]),e._v(" means that the user is guaranteed to either\nget what they wanted or get back a full refund of what they offered.")]),e._v(" "),a("p",[e._v("For Zoe to enforce offer safety, the user must\ngive Zoe a "),a("code",[e._v("proposal")]),e._v(". This is a description of both what they want and what\nthey are offering, and when and how the user can exit the contract. Zoe uses\nthis last to enforce payout liveness. The exit specification is optional, and\ndefaults to "),a("code",[e._v("OnDemand")]),e._v(", meaning a user can exit the contract instance at their\ndiscretion.")]),e._v(" "),a("p",[e._v("For example, I want to buy an event ticket for which I offer $100. In Zoe,\nmy "),a("code",[e._v("proposal")]),e._v(" is:")]),e._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  give"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v(" Price"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" dollars100 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  want"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v(" Asset"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" ticket1 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),a("p",[a("code",[e._v("Asset")]),e._v(" and "),a("code",[e._v("Price")]),e._v(" are the "),a("code",[e._v("keywords")]),e._v(" of a contract. Keywords\nlet contract users easily and consistently refer to parts of\na proposal, payments escrowed with Zoe, and payouts received from Zoe.")]),e._v(" "),a("p",[e._v("For example, the user escrows assets with Zoe by submitting payments\nusing keywords. In this example, I would send Zoe a $100 payment to\nescrow my offer, as Zoe immediately escrows the "),a("code",[e._v("give:")]),e._v("-specified payment.")]),e._v(" "),a("p",[e._v("After the user escrows, they get a promise for a payout from Zoe.\nThis is the payout that offer safety is enforced over. The payout "),a("em",[e._v("must")]),e._v("\nbe either what the user wanted (an event ticket in the above example)\nor a full refund of what they escrowed ($100 in this example).")]),e._v(" "),a("p",[e._v("We can enforce offer safety because Zoe controls the payout. In the example,\nif I try to buy my event ticket using a smart contract on Zoe, the contract\ncan tell Zoe to update its bookkeeping to say I've bought a ticket.\nBut, Zoe only actually updates its records and gives me an event ticket\npayout if that update is offer-safe and conserves total supply.")]),e._v(" "),a("p",[e._v("The offer safety enforcement code is in\n"),a("a",{attrs:{href:"https://github.com/Agoric/agoric-sdk/blob/master/packages/zoe/src/contractFacet/offerSafety.js",target:"_blank",rel:"noopener noreferrer"}},[e._v("offerSafety.js"),a("OutboundLink")],1),e._v(".\nTests, including edge cases, are in "),a("a",{attrs:{href:"https://github.com/Agoric/agoric-sdk/blob/master/packages/zoe/test/unitTests/test-offerSafety.js",target:"_blank",rel:"noopener noreferrer"}},[e._v("test-offerSafety.js"),a("OutboundLink")],1),e._v(".")]),e._v(" "),a("h2",{attrs:{id:"implementation-questions"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#implementation-questions"}},[e._v("#")]),e._v(" Implementation Questions")]),e._v(" "),a("p",[a("strong",[e._v("Under offer safety, can I get a full refund "),a("em",[e._v("and")]),e._v(" what I wanted?")])]),e._v(" "),a("p",[e._v("Yes, you can get a full refund "),a("em",[e._v("and")]),e._v(" what you wanted. Offer safety guarantees at least\none is true. Both could also be true.")]),e._v(" "),a("p",[a("strong",[e._v("What if there are no rules under "),a("code",[e._v("give")]),e._v("?")])]),e._v(" "),a("p",[e._v("If there are no rules or "),a("code",[e._v("give")]),e._v(" is omitted, then you get a full refund\nof what you put in, fulfilling offer safety. It's just the case that\nyou put in nothing, so you get back nothing. However, you "),a("em",[e._v("might")]),e._v(" also\nget what you wanted, depending on whether your offer of\nnothing for it is accepted.")]),e._v(" "),a("p",[a("strong",[e._v("What if there are no rules under "),a("code",[e._v("want")])])]),e._v(" "),a("p",[e._v("If there are no rules or "),a("code",[e._v("want")]),e._v(" is omitted, then you get what\nyou wanted, in this case nothing. This fulfills offer safety.")])],1)}),[],!1,null,null,null);t.default=o.exports}}]);