(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{356:function(t,e,a){t.exports=a.p+"assets/img/relationships1.6963650c.svg"},357:function(t,e,a){t.exports=a.p+"assets/img/relationships2.392c65c9.svg"},358:function(t,e,a){t.exports=a.p+"assets/img/asset-creation.aebcc522.svg"},359:function(t,e,a){t.exports=a.p+"assets/img/asset-transfer.b5c8a1e6.svg"},420:function(t,e,a){"use strict";a.r(e);var s=a(44),n=Object(s.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"ertp-guide"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ertp-guide"}},[t._v("#")]),t._v(" ERTP Guide")]),t._v(" "),s("p",[t._v("ERTP ("),s("em",[t._v("Electronic Rights Transfer Protocol")]),t._v(")\nis Agoric's token standard for transferring tokens and other digital assets in\nJavaScript. Using the "),s("RouterLink",{attrs:{to:"/ertp/api/"}},[t._v("ERTP API")]),t._v(",\nyou can easily create and use digital assets, all of which are\ntransferred exactly the same way and with exactly the same security properties.")],1),t._v(" "),s("p",[t._v("ERTP uses "),s("em",[s("RouterLink",{attrs:{to:"/glossary/#object-capabilities"}},[t._v("OCaps (object capabilities)")])],1),t._v("\nto enforce access control. If your program has a reference to an\nobject, it can call methods on that object. If it doesn't have a\nreference, it can't. For more on object capabilities, see\n"),s("a",{attrs:{href:"http://habitatchronicles.com/2017/05/what-are-capabilities/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Chip Morningstar's post"),s("OutboundLink")],1),t._v(".")]),t._v(" "),s("h2",{attrs:{id:"fungible-and-non-fungible-assets"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#fungible-and-non-fungible-assets"}},[t._v("#")]),t._v(" Fungible and Non-Fungible Assets")]),t._v(" "),s("p",[t._v("There are two kinds of assets,\n"),s("em",[s("RouterLink",{attrs:{to:"/glossary/#fungible"}},[t._v("fungible")])],1),t._v(" and\n"),s("em",[s("RouterLink",{attrs:{to:"/glossary/#non-fungible"}},[t._v("non-fungible")])],1),t._v(".")]),t._v(" "),s("p",[t._v("Fungible assets are interchangeable. For example, if you have 100\none-dollar bills and need to pay someone 5 dollars, it doesn't matter\nwhich five of your one-dollar bills you give them.")]),t._v(" "),s("p",[t._v("Non-fungible assets have the same brand, but are not interchangeable. For example, you might have 100\ntheatre tickets. But someone wanting to buy even a General Admission ticket from you will want one\nfor a specific date and time. This might also affect the price; you'll want to charge more\nfor a Friday evening ticket than a Wednesday matinee ticket, even if it's for the same show.")]),t._v(" "),s("h2",{attrs:{id:"ertp-concepts-overview"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ertp-concepts-overview"}},[t._v("#")]),t._v(" ERTP Concepts Overview")]),t._v(" "),s("p",[t._v("Asset descriptions have two parts:")]),t._v(" "),s("ul",[s("li",[s("strong",[s("RouterLink",{attrs:{to:"/ertp/guide/amounts.html#values"}},[t._v("Value")])],1),t._v(':  An\nasset\'s size. You can think of this as the answer to the questions "how many?" or "how much?" about\nan asset.')]),t._v(" "),s("li",[s("strong",[s("RouterLink",{attrs:{to:"/ertp/guide/amounts.html#brands"}},[t._v("Brand")])],1),t._v(': An\nasset\'s kind. You can think of this as the answer to the question "What is it?" about an asset.')])]),t._v(" "),s("p",[t._v("These two make up:")]),t._v(" "),s("ul",[s("li",[s("strong",[s("RouterLink",{attrs:{to:"/ertp/guide/amounts.html"}},[t._v("Amount")])],1),t._v(":\nA record consisting of a "),s("code",[t._v("value")]),t._v(" and a "),s("code",[t._v("brand")]),t._v(". It is a description of an asset, not an asset itself,\nas it has no economic scarcity or economic value.")])]),t._v(" "),s("p",[t._v('So, using the fictional currency Quatloos, you could have an asset described as being "400 Quatloos",\nwhere '),s("code",[t._v("400n")]),t._v(" is the "),s("code",[t._v("value")]),t._v(" and "),s("code",[t._v("Quatloos")]),t._v(" is the "),s("code",[t._v("brand")]),t._v('. For now, we\'ll just look at fungible assets\nwhose values have to be non-negative integers represented as BigInts (thus the appended "n" on that '),s("code",[t._v("value")]),t._v(").")]),t._v(" "),s("p",[t._v("Manipulating payment and other amounts, such as depositing and withdrawing assets from a purse, all require\nadding and subtracting digital assets. You may also want to compare amount values. ERTP uses the "),s("code",[t._v("AmountMath")]),t._v("\nlibrary for all these operations.")]),t._v(" "),s("ul",[s("li",[s("strong",[s("RouterLink",{attrs:{to:"/ertp/guide/amount-math.html"}},[t._v("AmountMath")])],1),t._v(":\nA library for doing math operations on "),s("code",[t._v("amounts")])])]),t._v(" "),s("p",[t._v("The "),s("code",[t._v("brand")]),t._v(" is a very important component. Most ERTP objects work with or on one specific "),s("code",[t._v("brand")]),t._v(".\nIn fact, instances of these next three components all only work on one "),s("code",[t._v("brand")]),t._v(". Note also that their\nrelationships with a "),s("code",[t._v("brand")]),t._v(" are established at their creation and can never be changed. If they are\ninitially associated with Quatloos, they are always associated with Quatloos and Quatloos only.")]),t._v(" "),s("ul",[s("li",[s("strong",[s("RouterLink",{attrs:{to:"/ertp/guide/issuers-and-mints.html#mints"}},[t._v("Mint")])],1),t._v(":\nThe only way to create digital assets of a particular "),s("code",[t._v("brand")]),t._v(". Each "),s("code",[t._v("brand")]),t._v(" has\na one to one relationship with a "),s("code",[t._v("mint")]),t._v(" and vice versa. The created assets are stored in "),s("code",[t._v("payments")]),t._v(".")]),t._v(" "),s("li",[s("strong",[s("RouterLink",{attrs:{to:"/ertp/guide/issuers-and-mints.html#issuers"}},[t._v("Issuer")])],1),t._v(":\nThe source of truth of how many digital assets each "),s("code",[t._v("purse")]),t._v(" and "),s("code",[t._v("payment")]),t._v(" holds. An "),s("code",[t._v("issuer")]),t._v("\nis used to validate "),s("code",[t._v("payments")]),t._v(" received from untrusted parties. Specifically, it validates\n"),s("code",[t._v("payments")]),t._v(" of the "),s("code",[t._v("brand")]),t._v(" the "),s("code",[t._v("issuer")]),t._v(" is associated with. Has a one-to-one relationship\nwith both a "),s("code",[t._v("brand")]),t._v(" and a "),s("code",[t._v("mint")]),t._v(".")])]),t._v(" "),s("p",[s("img",{attrs:{src:a(356),alt:"ERTP object relationships"}})]),t._v(" "),s("p",[t._v('Let\'s look at an example. Suppose there is the "Quatloos" '),s("code",[t._v("brand")]),t._v(". That means there is also:")]),t._v(" "),s("ul",[s("li",[t._v('A "Quatloos '),s("code",[t._v("mint")]),t._v('" that is the only ERTP '),s("code",[t._v("mint")]),t._v(" that can ever create new Quatloos assets.")]),t._v(" "),s("li",[t._v('A "Quatloos '),s("code",[t._v("issuer")]),t._v('" that is the only '),s("code",[t._v("issuer")]),t._v(" that can create a new "),s("code",[t._v("purse")]),t._v(" to contain Quatloos and\noperate on a "),s("code",[t._v("payment")]),t._v(" containing Quatloos.")])]),t._v(" "),s("p",[s("img",{attrs:{src:a(357),alt:"ERTP object relationships 2"}})]),t._v(" "),s("p",[t._v("We've already mentioned our final two components:")]),t._v(" "),s("ul",[s("li",[s("strong",[s("RouterLink",{attrs:{to:"/ertp/guide/purses-and-payments.html#purses"}},[t._v("Purse")])],1),t._v(": An\nobject for holding digital assets of a specific "),s("code",[t._v("brand")]),t._v(".")]),t._v(" "),s("li",[s("strong",[s("RouterLink",{attrs:{to:"/ertp/guide/purses-and-payments.html#payments"}},[t._v("Payment")])],1),t._v(":\nAn object for transferring digital assets of a specific "),s("code",[t._v("brand")]),t._v(" to another party.")])]),t._v(" "),s("p",[t._v("Similar to other component instances, a "),s("code",[t._v("purse")]),t._v(" and a "),s("code",[t._v("payment")]),t._v(" only work with one\n"),s("code",[t._v("brand")]),t._v(". So a "),s("code",[t._v("purse")]),t._v(" or "),s("code",[t._v("payment")]),t._v(" that holds Quatloos cannot hold an asset of "),s("code",[t._v("brand")]),t._v(" Moola or vice versa.\nYou cannot change the "),s("code",[t._v("brand")]),t._v(" a "),s("code",[t._v("purse")]),t._v(" or "),s("code",[t._v("payment")]),t._v(" was originally associated with. Once you create a\nQuatloos purse or Quatloos payment, they can never hold anything other than Quatloos.")]),t._v(" "),s("p",[t._v("However, these are not one-to-one relationships. There can be thousands or more\n"),s("code",[t._v("purses")]),t._v(" or "),s("code",[t._v("payments")]),t._v(" that hold Quatloos or any other "),s("code",[t._v("brand")]),t._v(".")]),t._v(" "),s("h2",{attrs:{id:"method-naming-structure"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#method-naming-structure"}},[t._v("#")]),t._v(" Method Naming Structure")]),t._v(" "),s("p",[t._v("ERTP methods use a template for their names. Knowing what a particular method name prefix represents\ncan help you when reading code. For consistency, you may want to also use this template for your Agoric\ncode.")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("make<Foo>()")]),t._v(": Creates a new Foo object and returns only that object.")]),t._v(" "),s("li",[s("code",[t._v("make<Foo>Kit()")]),t._v(": Creates a new Foo object as well as other things. It returns some combination of useful things, usually including the new\nFoo object. But not always; sometimes Foo is conceptual, and, for example, instead of a single object, two facets are returned.")]),t._v(" "),s("li",[s("code",[t._v("create<Foo>()")]),t._v(": Creates a new Foo, but doesn't return it.")]),t._v(" "),s("li",[s("code",[t._v("get<Foo>()")]),t._v(": Returns a Foo that already exists.")]),t._v(" "),s("li",[s("code",[t._v("provide<Foo>()")]),t._v(": If Foo already exists, returns it. If not, it creates a new Foo and returns that.")])]),t._v(" "),s("h2",{attrs:{id:"life-of-assets"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#life-of-assets"}},[t._v("#")]),t._v(" Life of Assets")]),t._v(" "),s("p",[t._v("Let's look at some asset operation lifecycles. While it's very rare for an asset to be destroyed, as opposed to being\nredistributed, these lifecycles show assets from their creation through common usage patterns. These are\ndeliberately stripped down to their basic, core, functionality. Optional parameters and non-core operations\nare not shown, nor are some significant concepts which would make this introduction more confusing. Those\nare covered on the component-specific pages.")]),t._v(" "),s("h3",{attrs:{id:"asset-creation-and-storage"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#asset-creation-and-storage"}},[t._v("#")]),t._v(" Asset creation and storage")]),t._v(" "),s("p",[s("img",{attrs:{src:a(358),alt:"Asset creation"}})]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  issuer"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" quatloosIssuer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  mint"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" quatloosMint"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  brand"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" quatloosBrand"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("makeIssuerKit")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'quatloos'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")])])])]),s("p",[t._v("First, you pass a string naming a new "),s("code",[t._v("brand")]),t._v(" to\n"),s("code",[t._v("makeIssuerKit()")]),t._v(". As noted above, a "),s("code",[t._v("make<Foo>Kit()")]),t._v(" method creates both a new Foo, in this case an "),s("code",[t._v("issuer")]),t._v(", and some other things.\nHere it also creates a new "),s("code",[t._v("mint")]),t._v(" and formal "),s("code",[t._v("brand")]),t._v("\nfor the argument, and returns all three new objects. The "),s("code",[t._v("mint")]),t._v(", "),s("code",[t._v("issuer")]),t._v(", and "),s("code",[t._v("brand")]),t._v("\nare in one-to-one associations with each other.")]),t._v(" "),s("p",[t._v("In this case, you used the string 'quatloos' to name the "),s("code",[t._v("brand")]),t._v(".")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" quatloosSeven "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" AmountMath"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("quatloosBrand"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("7n")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")])])])]),s("p",[t._v("Here you use "),s("code",[t._v("AmountMath")]),t._v(" to make a new "),s("code",[t._v("amount")]),t._v(" description of the asset you want to create.\nYou need to specify what you want for the "),s("code",[t._v("value")]),t._v(" of the new "),s("code",[t._v("amount")]),t._v(", in this case "),s("code",[t._v("7n")]),t._v(", as\nwell as what "),s("code",[t._v("brand")]),t._v(" it will be.")]),t._v(" "),s("p",[t._v("This returns an "),s("code",[t._v("amount")]),t._v(" description stored in "),s("code",[t._v("quatloosSeven")]),t._v(". Remember, an "),s("code",[t._v("amount")]),t._v(" is only a description\nof an asset, not an asset itself. "),s("code",[t._v("quatloosSeven")]),t._v(" has no worth or intrinsic value.")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" quatloosPayment "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" quatloosMint"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mintPayment")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("quatloosSeven"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")])])])]),s("p",[t._v("This mints a new asset of 7 Quatloos. In this case, since it's a "),s("code",[t._v("mint")]),t._v(" operation, you are creating\na new digital asset of 7 Quatloos. It's returned as a "),s("code",[t._v("payment")]),t._v(", so you want a place to store it for\nthe longer term.")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" quatloosPurse "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" quatloosIssuer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("makeEmptyPurse")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nquatloosPurse"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("deposit")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("quatloosPayment"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")])])])]),s("p",[t._v("For long term storage, we prefer using a "),s("code",[t._v("purse")]),t._v(". "),s("code",[t._v("payments")]),t._v(" are generally used to transfer assets rather than\nhold them for extended periods. First you create a new empty "),s("code",[t._v("purse")]),t._v(" for Quatloos using\nthe Quatloos associated "),s("code",[t._v("issuer")]),t._v(". Then you deposit the "),s("code",[t._v("payment")]),t._v(" into the "),s("code",[t._v("purse")]),t._v(". When this happens,\nthe "),s("code",[t._v("payment")]),t._v(" is automatically deleted and the 7 Quatloos are now resident\nin the "),s("code",[t._v("purse")]),t._v(". If you'd used an existing "),s("code",[t._v("purse")]),t._v(" that contained, say, 17 Quatloos, these 7 would have been\nadded to them so the "),s("code",[t._v("purse")]),t._v(" balance would be 24 Quatloos.")]),t._v(" "),s("h3",{attrs:{id:"transferring-an-asset"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#transferring-an-asset"}},[t._v("#")]),t._v(" Transferring an asset")]),t._v(" "),s("p",[s("img",{attrs:{src:a(359),alt:"Asset transfer"}}),t._v("\nStart with your "),s("code",[t._v("quatloosPurse")]),t._v(" that holds 7 Quatloos. You decide you want to send 5 Quatloos to\nanother party named Alice.")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" quatloosFive "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" AmountMath"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("quatloosBrand"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5n")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")])])])]),s("p",[t._v("First you create a new Quatloos branded "),s("code",[t._v("amount")]),t._v(" with a "),s("code",[t._v("value")]),t._v(" of 5 to describe what you want to withdraw.\nRemember, an "),s("code",[t._v("amount")]),t._v(" is just a description of assets, not the actual assets.")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" myQuatloosPayment "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" quatloosPurse"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("withdraw")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("quatloosFive"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")])])])]),s("p",[t._v("Now you tell your Quatloos containing "),s("code",[t._v("purse")]),t._v(" that you want to withdraw the specified "),s("code",[t._v("amount")]),t._v(" from\nit. The withdrawn 5 Quatloos goes into a "),s("code",[t._v("payment")])]),t._v(" "),s("p",[t._v("You've got your "),s("code",[t._v("payment")]),t._v(" for 5 Quatloos, but how do you get it to Alice? She needs to\ndo some work first so there's somewhere for her to put it and a way of getting it to\nher rather than someone else.")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" aliceQuatloosDepositFacet "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" aliceQuatloosPurse"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getDepositFacet")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")])])])]),s("p",[t._v("Assume Alice already has a Quatloos containing "),s("code",[t._v("purse")]),t._v(" of her own. To let other\nparties safely deposit Quatloos into it, she creates\na "),s("em",[t._v("deposit facet")]),t._v(" for that "),s("code",[t._v("purse")]),t._v(". Anyone who has access to a deposit facet can deposit\nassets to its "),s("code",[t._v("purse")]),t._v(" but cannot either make a withdrawal from the "),s("code",[t._v("purse")]),t._v(" or get its balance. It's like\nbeing able to send money to a friend via their email address; you can't then take money out\nof your friend's accounts or find out how much is in them.")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" aliceQuatloosDepositFacetId "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("E")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("board"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  aliceQuatloosDepositFacet"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")])])])]),s("p",[t._v("Alice puts her deposit facet on Agoric's "),s("em",[t._v("Board")]),t._v(', a key-value "bulletin board" that lets her make it generally available for use.')]),t._v(" "),s("p",[t._v("The Board is a basic bulletin board type system where users can post an Id for a value and\nothers can get the value just by knowing the Id. Alice can make her Id(s) known by any\ncommunication method she likes; private email, an email blast to a mailing list or many individuals,\nbuying an ad on a website, tv program, or newspaper, listing it on her website, etc.")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" depositFacet "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("E")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("board"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getValue")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("aliceQuatloosDepositFacetId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("E")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("depositFacet"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("receive")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("myQuatloosPayment"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")])])])]),s("p",[t._v("Remember, ERTP's use of OCaps requires that you have access to an object in order\nto run methods on it. So someone who wants to use Alice's deposit facet\nhas to first get it off the Board.")]),t._v(" "),s("p",[t._v("Alice tells you the Board Id associated with her Quatloos "),s("code",[t._v("purse")]),t._v(" deposit facet. You get the Id associated value,\nwhich gives you the reference to that deposit facet. You then just tell the facet to receive your "),s("code",[t._v("payment")]),t._v("\nof 5 Quatloos.")]),t._v(" "),s("p",[t._v("Things end up with your Quatloos "),s("code",[t._v("purse")]),t._v(" having 2 Quatloos (7 - 5), Alice's Quatloos "),s("code",[t._v("purse")]),t._v(" having 5 more Quatloos\nin it, and the 5 Quatloos "),s("code",[t._v("payment")]),t._v(" deleted when the transfer happened.")]),t._v(" "),s("p",[t._v("The "),s("RouterLink",{attrs:{to:"/guides/js-programming/eventual-send.html"}},[s("code",[t._v("E()")]),t._v(" notation")]),t._v(' is\na local "bridge" function that lets you invoke methods on remote objects. It takes a local\nrepresentative (a proxy) for a remote object as an argument and sends messages to it. The local proxy\nforwards all messages to the remote object to deal with. '),s("code",[t._v("E")]),t._v(" must be used to send a message to the remote object. This\nis explained in more detail at the preceding link.")],1),t._v(" "),s("h2",{attrs:{id:"creating-and-using-non-fungible-assets"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#creating-and-using-non-fungible-assets"}},[t._v("#")]),t._v(" Creating and using non-fungible assets")]),t._v(" "),s("p",[t._v("Say you own the Agoric Theatre and want to sell tickets to seats for a play. Tickets are non-fungible assets,\nas they refer to a specific seat for a specific show at a specific time and date. It matters to\nbuyers which ticket they get.")]),t._v(" "),s("p",[t._v("The Agoric Theatre has 1114 seats numbered "),s("code",[t._v("1")]),t._v(" to "),s("code",[t._v("1114")]),t._v(".\nObjects representing valid tickets have the properties:")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("seat")]),t._v(": A number")]),t._v(" "),s("li",[s("code",[t._v("show")]),t._v(": A string describing the show")]),t._v(" "),s("li",[s("code",[t._v("start")]),t._v(": A string representing a "),s("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toISOString",target:"_blank",rel:"noopener noreferrer"}},[t._v("time/date in ISO format"),s("OutboundLink")],1)])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" startDateString "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Date")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2019")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("9")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toISOString")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" ticketValues "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Array")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1114")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("fill")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("map")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("_"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" i")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    seat"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    show"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Hamilton'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    start"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" startDateString"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")])])])]),s("p",[t._v("To create tickets, you first create JavaScript objects that each represent a ticket.\nThen, because you need to specify the amount of digital assets to be minted,\nyou can use "),s("code",[t._v("AmountMath")]),t._v(" to make an amount. In this case, you're making tickets\nfor one performance of "),s("em",[t._v("Hamilton")]),t._v(".")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  mint"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" agoricTheatreTicketMint"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  brand"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" agoricTheatreTicketBrand"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("makeIssuerKit")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Agoric Theater tickets'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" AssetKind"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("SET")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")])])])]),s("p",[t._v("As before, you use "),s("code",[t._v("makeIssuerKit()")]),t._v(" to create a "),s("code",[t._v("mint")]),t._v(" that can create Agoric Theatre ticket assets.\nThe difference from when you created a fungible asset is that you have to use a second argument,\nin this case "),s("code",[t._v("AssetKind.SET")]),t._v(".")]),t._v(" "),s("p",[t._v("There are two "),s("code",[t._v("AssetKinds")]),t._v(". Each one polymorphically implements the same set of methods.")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("AssetKind.NAT")]),t._v(": Works with natural number "),s("code",[t._v("values")]),t._v(" and fungible assets. Default value for "),s("code",[t._v("makeIssuerKit()")]),t._v(".")]),t._v(" "),s("li",[s("code",[t._v("AssetKind.SET")]),t._v(": Used with non-fungible assets, operates on an array of records (objects) with keys and values.")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" ticketAmounts "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ticketValues"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("map")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("ticketValue")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v("\n  AmountMath"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("agoricTheatreTicketBrand"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("harden")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("ticketValue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" agoricTheatreTicketPayments "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ticketAmounts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("map")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("ticketAmount")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v("\n  agoricTheatreTicketMint"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mintPayment")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ticketAmount"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")])])])]),s("p",[t._v("First you define an "),s("code",[t._v("amount")]),t._v(" description for each ticket you want to issue.")]),t._v(" "),s("p",[t._v("Then you use your "),s("code",[t._v("mint")]),t._v(" for the appropriate "),s("code",[t._v("brand")]),t._v(" to create an asset for each ticket. Each ticket asset\nis a separate "),s("code",[t._v("payment")]),t._v(". You can transfer and deposit a non-fungible asset "),s("code",[t._v("payment")]),t._v(" just like a fungible one.")]),t._v(" "),s("h2",{attrs:{id:"amounts-are-not-assets"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#amounts-are-not-assets"}},[t._v("#")]),t._v(" Amounts are not assets")]),t._v(" "),s("p",[s("strong",[t._v("IMPORTANT")]),t._v(": Despite how it may seem, an "),s("code",[t._v("amount")]),t._v(" is only a description of an asset, not\nan asset in and of itself.\nAn asset is held by a "),s("code",[t._v("purse")]),t._v(" or "),s("code",[t._v("payment")]),t._v(" in the same way a bank account holds money; not because of anything physical,\nbut because of a record held by an authoritative source. In ERTP, the "),s("code",[t._v("issuer")]),t._v(" for each "),s("code",[t._v("brand")]),t._v(" of asset\nis the source of truth of what assets of that "),s("code",[t._v("brand")]),t._v(" are held by what "),s("code",[t._v("purses")]),t._v(" and "),s("code",[t._v("payments")]),t._v(".\nThere is no "),s("code",[t._v("amount")]),t._v(" stored in a "),s("code",[t._v("purse")]),t._v(" or "),s("code",[t._v("payment")]),t._v(".")]),t._v(" "),s("p",[t._v("For example, if I want to make you an offer to buy an asset, let's say a magic sword in a game, I'll send you\nan "),s("code",[t._v("amount")]),t._v(" describing the asset of 5 Quatloos I'm willing to trade for your sword. I don't send you the actual\n5 Quatloos; that only happens when we agree on the trade terms and I send you a "),s("code",[t._v("payment")]),t._v(" of 5 Quatloos, the\nactual asset.")]),t._v(" "),s("p",[t._v("If you reject my offer, I can change it so the "),s("code",[t._v("amount")]),t._v(" I specify is for 10 Quatloos. I haven't added actual\nassets of 5 Quatloos to what I send you, only the description of assets in the offer I'm making for the sword.")]),t._v(" "),s("p",[t._v("Making a new "),s("code",[t._v("amount")]),t._v(" does not create any new assets. Nor does adding two "),s("code",[t._v("amounts")]),t._v("; since an "),s("code",[t._v("amount")]),t._v(" is immutable, the\naddition just creates a new "),s("code",[t._v("amount")]),t._v(" while the original two still exist. Since an "),s("code",[t._v("amount")]),t._v(" is just a description of an\nasset, it's the same as how you can't create a new ten dollar\nbill by drawing one; a new one has to be minted (printed) by an authorized government-run facility with its asset status\nderived from its government backing. Similarly, "),s("code",[t._v("mints")]),t._v(" create new assets in ERTP\nby creating a new "),s("code",[t._v("payment")]),t._v(" that contains a newly created asset.")]),t._v(" "),s("p",[t._v("So an "),s("code",[t._v("amount")]),t._v(" just describes an asset along the two axes of how many and\nwhat units it's in ("),s("code",[t._v("value")]),t._v(" and "),s("code",[t._v("brand")]),t._v("). They're used as a way of negotiating\nwith parties that doesn't involve sending/sharing the actual asset\nuntil a deal is made.")]),t._v(" "),s("p",[t._v("In other words, I don't make you an offer that I'll swap you a ticket to "),s("em",[t._v("Hamilton")]),t._v(" for $300\nby sending you an actual ticket any more than you sent me $300 before finding out what I'd give you for it. Instead,\nI make you an offer by sending you a written description\nof what I'm willing to swap (\"I will swap a "),s("em",[t._v("Hamilton")]),t._v(' ticket for $300"). If the offer is accepted, then I send you the actual asset,\nin this case an actual '),s("em",[t._v("Hamilton")]),t._v(" ticket (enjoy the show!) and you send me the actual $300 (I'll enjoy spending it!).")]),t._v(" "),s("h2",{attrs:{id:"object-capabilities-and-ertp"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#object-capabilities-and-ertp"}},[t._v("#")]),t._v(" Object capabilities and ERTP")]),t._v(" "),s("p",[t._v("ERTP uses "),s("RouterLink",{attrs:{to:"/glossary/#object-capabilities"}},[s("em",[t._v("object capabilities")])]),t._v(".\nYou can only use an object and issue commands to it if you have access to that object, not\njust its human-readable name or similar. For example, I might know (or make a good guess),\nthat the mint that makes Quatloos has the human-understandable alleged name of 'quatloos-mint'.\nBut unless I have the actual "),s("code",[t._v("mint")]),t._v(" object associated with the "),s("code",[t._v("quatloos")]),t._v(" "),s("code",[t._v("brand")]),t._v(" object, I\ncan't use it to create a million Quatloos and bet them all on Captain Kirk to win his gladiatorial\nmatch on Triskelion (see the "),s("a",{attrs:{href:"https://en.wikipedia.org/wiki/The_Gamesters_of_Triskelion",target:"_blank",rel:"noopener noreferrer"}},[t._v("Wikipedia entry for the Star Trek episode"),s("OutboundLink")],1),t._v(").")],1),t._v(" "),s("h2",{attrs:{id:"security-properties"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#security-properties"}},[t._v("#")]),t._v(" Security properties")]),t._v(" "),s("p",[t._v("ERTP "),s("code",[t._v("purses")]),t._v(" have a "),s("code",[t._v("deposit")]),t._v(" method which takes a "),s("code",[t._v("payment")]),t._v("\nas its argument. It first checks that the "),s("code",[t._v("payment")]),t._v(" is\ngenuine and the same asset "),s("code",[t._v("brand")]),t._v(" as the "),s("code",[t._v("purse")])]),t._v(" "),s("p",[t._v("If everything passes the checks, the asset moves from\nthe "),s("code",[t._v("payment")]),t._v(" to the "),s("code",[t._v("purse")]),t._v(". If there's a problem, it throws an error.")]),t._v(" "),s("p",[t._v("After a successful deposit, ERTP guarantees:")]),t._v(" "),s("ul",[s("li",[t._v("The "),s("code",[t._v("payment")]),t._v(" is deleted from its "),s("code",[t._v("issuer")]),t._v("'s records and no longer has any assets associated with it.")]),t._v(" "),s("li",[t._v("Its "),s("code",[t._v("issuer")]),t._v(" no longer recognizes that "),s("code",[t._v("payment")]),t._v(".")]),t._v(" "),s("li",[t._v("The "),s("code",[t._v("purse")]),t._v(" contains all digital assets that were in the "),s("code",[t._v("payment")]),t._v(".")])]),t._v(" "),s("p",[t._v("When the "),s("code",[t._v("deposit")]),t._v(" call throws an error (i.e. something went wrong), ERTP guarantees\nthe "),s("code",[t._v("purse")]),t._v(" and the alleged "),s("code",[t._v("payment")]),t._v(" were unaffected by that call.")]),t._v(" "),s("p",[t._v("In addition, you can create a "),s("em",[t._v("deposit facet")]),t._v(" for any "),s("code",[t._v("purse")]),t._v(". This is an object associated\nwith a specific "),s("code",[t._v("purse")]),t._v(" that can be sent to another party instead of a reference to the "),s("code",[t._v("purse")]),t._v(".\nThe security advantage is that the other party can only make deposits to the associated "),s("code",[t._v("purse")]),t._v("\nvia the deposit facet. They cannot make a withdrawal from or ask about the balance of a "),s("code",[t._v("purse")]),t._v(" via its deposit facet.")]),t._v(" "),s("h2",{attrs:{id:"promises"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#promises"}},[t._v("#")]),t._v(" Promises")]),t._v(" "),s("p",[t._v("Several ERTP methods are "),s("em",[t._v("asynchronous")]),t._v(" and instead of immediately returning their expected value, return a "),s("em",[t._v("promise")]),t._v(" for that value.")]),t._v(" "),s("p",[t._v("JavaScript implements "),s("code",[t._v("Promise")]),t._v(" objects, and recently added the two keywords "),s("code",[t._v("async")]),t._v(" and "),s("code",[t._v("await")]),t._v(" to simplify working with them. For general, and extensive, information about JavaScript's implementation, see either:")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://javascript.info/async",target:"_blank",rel:"noopener noreferrer"}},[t._v("javascript.info"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Asynchronous",target:"_blank",rel:"noopener noreferrer"}},[t._v("Mozilla's Developer Docs"),s("OutboundLink")],1)])])])}),[],!1,null,null,null);e.default=n.exports}}]);