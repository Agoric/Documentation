(window.webpackJsonp=window.webpackJsonp||[]).push([[56],{456:function(e,t,a){"use strict";a.r(t);var s=a(41),r=Object(s.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"wallet-api"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#wallet-api"}},[e._v("#")]),e._v(" Wallet API")]),e._v(" "),a("p",[e._v("You can interact with a Wallet via the JavaScript "),a("em",[e._v("REPL")]),e._v(" ("),a("em",[e._v("Read-Eval-Print Loop")]),e._v("),\nwhich is visible at the bottom of the Wallet UI display.\nIn the REPL, you send messages to "),a("code",[e._v("home.wallet")]),e._v(", which is the Wallet running on that\npage/process. Typing "),a("code",[e._v("E(home.wallet).foo()")]),e._v(" in the REPL returns the names of all the Wallet\nAPI methods by the clever method of asking it to evaluate a non-existent API method and\ngetting an error message listing all the valid methods.")]),e._v(" "),a("p",[e._v("Running "),a("code",[e._v("agoric open --repl==only")]),e._v(" opens a browser tab that shows only the REPL, and not\nthe combination of Wallet UI and REPL area. When issuing commands to the Wallet from the\nREPL, they must be of the form "),a("code",[e._v("E(home.wallet).<Wallet API command and arguments>")]),e._v(". For more\ninformation about "),a("code",[e._v("E()")]),e._v(", see the "),a("RouterLink",{attrs:{to:"/guides/js-programming/eventual-send.html"}},[a("code",[e._v("E()")]),e._v(" section")]),e._v(" in\nthe Distributed JavaScript Programming Guide.")],1),e._v(" "),a("p",[e._v("There are two objects on which the Wallet API commands work:")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("WalletUser")]),e._v(": The presence exposed as "),a("code",[e._v("local.wallet")]),e._v(" (and "),a("code",[e._v("home.wallet")]),e._v(" for backwards compatibility)."),a("br"),e._v("\nIt provides a place for Wallet API commands.")]),e._v(" "),a("li",[a("code",[e._v("WalletBridge")]),e._v(": Its methods can be used by an untrusted\nDapp without breaching the wallet's integrity.  These methods are also\nexposed via the iframe/WebSocket bridge that a Dapp UI can use to access the\nwallet.")])]),e._v(" "),a("h2",{attrs:{id:"wallet-api-commands"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#wallet-api-commands"}},[e._v("#")]),e._v(" Wallet API commands")]),e._v(" "),a("h3",{attrs:{id:"getbridge"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#getbridge"}},[e._v("#")]),e._v(" "),a("code",[e._v("getBridge()")])]),e._v(" "),a("ul",[a("li",[e._v("Returns: "),a("code",[e._v("{Promise<WalletBridge>}")])])]),e._v(" "),a("p",[e._v("Returns the wallet bridge that bypasses Dapp-authorization. This should\nonly be used within the REPL or deployment scripts that want to use the\nWalletBridge API without the effort of calling "),a("code",[e._v("getScopedBridge")]),e._v(".\nSince your REPL and deployment scripts already run using the ag-solo's full authority,\nit doesn't really make a difference to have them use a more restricted bridge.")]),e._v(" "),a("h3",{attrs:{id:"getscopedbridge-suggesteddapppetname-dapporigin"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#getscopedbridge-suggesteddapppetname-dapporigin"}},[e._v("#")]),e._v(" "),a("code",[e._v("getScopedBridge(suggestedDappPetname, dappOrigin)")])]),e._v(" "),a("ul",[a("li",[a("code",[e._v("suggestedDappPetname")]),e._v(" "),a("code",[e._v("{Petname}")])]),e._v(" "),a("li",[a("code",[e._v("dappOrigin")]),e._v(" "),a("code",[e._v("{String}")])]),e._v(" "),a("li",[e._v("Returns: "),a("code",[e._v("{Promise<WalletBridge>}")])])]),e._v(" "),a("p",[e._v("Returns a wallet bridge corresponding to an origin that must be approved in the wallet UI.\nThis is available for completeness to provide the underlying API that's available over the\nstandard wallet-bridge.html.")]),e._v(" "),a("h3",{attrs:{id:"addpayment-payment"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#addpayment-payment"}},[e._v("#")]),e._v(" "),a("code",[e._v("addPayment(payment)")])]),e._v(" "),a("ul",[a("li",[a("code",[e._v("id")]),e._v(" "),a("code",[e._v("{ERef<Payment>}")])]),e._v(" "),a("li",[e._v("Returns: "),a("code",[e._v("void")])])]),e._v(" "),a("p",[e._v("Adds a payment to the Wallet for deposit to the user-specified purse,\neither via an autodeposit or manually approved.")]),e._v(" "),a("h3",{attrs:{id:"getdepositfacet-brandboardid"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#getdepositfacet-brandboardid"}},[e._v("#")]),e._v(" "),a("code",[e._v("getDepositFacet(brandBoardId)")])]),e._v(" "),a("ul",[a("li",[a("code",[e._v("brandBoardId")]),e._v(" "),a("code",[e._v("{String}")])]),e._v(" "),a("li",[e._v("Returns: "),a("code",[e._v("{Promise<string>}")])])]),e._v(" "),a("p",[e._v("Returns the board ID for the deposit facet of the user's Wallet that accepts payments\nof the brand specified by the "),a("code",[e._v("brandBoardId")]),e._v(" parameter.")]),e._v(" "),a("h3",{attrs:{id:"getissuers"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#getissuers"}},[e._v("#")]),e._v(" "),a("code",[e._v("getIssuers()")])]),e._v(" "),a("ul",[a("li",[e._v("Returns: "),a("code",[e._v("{Array<[Petname, Issuer]>}")])])]),e._v(" "),a("p",[e._v("Returns an array of all the Issuers and their petnames associated with this Wallet.")]),e._v(" "),a("h3",{attrs:{id:"getissuer-petname"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#getissuer-petname"}},[e._v("#")]),e._v(" "),a("code",[e._v("getIssuer(petname)")])]),e._v(" "),a("ul",[a("li",[a("code",[e._v("petname")]),e._v(" "),a("code",[e._v("{Petname}")])]),e._v(" "),a("li",[e._v("Returns: "),a("code",[e._v("{Issuer}")])])]),e._v(" "),a("p",[e._v("Returns the issuer with the specified petname associated with this Wallet.")]),e._v(" "),a("h3",{attrs:{id:"getpurses"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#getpurses"}},[e._v("#")]),e._v(" "),a("code",[e._v("getPurses()")])]),e._v(" "),a("ul",[a("li",[e._v("Returns: "),a("code",[e._v("{Array<[Petname, Purse]>}")])])]),e._v(" "),a("p",[e._v("Returns all the purses associated with this wallet.")]),e._v(" "),a("h3",{attrs:{id:"getpurse-pursepetname"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#getpurse-pursepetname"}},[e._v("#")]),e._v(" "),a("code",[e._v("getPurse(pursePetname)")])]),e._v(" "),a("ul",[a("li",[a("code",[e._v("pursePetName")]),e._v(" "),a("code",[e._v("{String}")])]),e._v(" "),a("li",[e._v("Returns "),a("code",[e._v("{Purse}")])]),e._v(" "),a("li",[e._v("Errors: Throws an error if there is no purse with the given petname.")])]),e._v(" "),a("p",[e._v("Returns the "),a("code",[e._v("purse")]),e._v(" object with the given petname")]),e._v(" "),a("h2",{attrs:{id:"walletbridge-api-commands"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#walletbridge-api-commands"}},[e._v("#")]),e._v(" WalletBridge API commands")]),e._v(" "),a("p",[e._v("These methods can be used by an untrusted Dapp without breaching the wallet's\nintegrity.  They are also exposed via the iframe/WebSocket bridge that a\nDapp UI can use to access a Wallet.")]),e._v(" "),a("h3",{attrs:{id:"addoffer-offer"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#addoffer-offer"}},[e._v("#")]),e._v(" "),a("code",[e._v("addOffer(offer)")])]),e._v(" "),a("ul",[a("li",[a("code",[e._v("offer")]),e._v(" "),a("code",[e._v("{OfferState}")])]),e._v(" "),a("li",[e._v("Returns: "),a("code",[e._v("{Promise<string>}")])])]),e._v(" "),a("p",[e._v("Adds an offer to the Wallet, returning the offer's unique private ID in the Wallet.\nThis ID is not stored in the Board.")]),e._v(" "),a("h3",{attrs:{id:"addofferinvitation-offer-invitation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#addofferinvitation-offer-invitation"}},[e._v("#")]),e._v(" "),a("code",[e._v("addOfferInvitation(offer, invitation)")])]),e._v(" "),a("ul",[a("li",[a("code",[e._v("offer")]),e._v(" "),a("code",[e._v("{OfferState}")])]),e._v(" "),a("li",[a("code",[e._v("invitation")]),e._v(" "),a("code",[e._v("{ERef<Payment>}")])]),e._v(" "),a("li",[e._v("Returns: "),a("code",[e._v("{Promise<string>}")])])]),e._v(" "),a("p",[e._v("Add the specified invitation to the specified offer, returning the offer's private ID in the Wallet."),a("br"),e._v("\nThis ID is not stored in the Board.")]),e._v(" "),a("h3",{attrs:{id:"getdepositfacetid-brandboardid"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#getdepositfacetid-brandboardid"}},[e._v("#")]),e._v(" "),a("code",[e._v("getDepositFacetId(brandBoardId")])]),e._v(" "),a("ul",[a("li",[a("code",[e._v("brandBoardId")]),e._v(" "),a("code",[e._v("{string}")])]),e._v(" "),a("li",[e._v("Returns: "),a("code",[e._v("{Promise<string>}")])])]),e._v(" "),a("p",[e._v("Returns the Board ID to use to receive payments of the specified by its Board ID brand.")]),e._v(" "),a("h3",{attrs:{id:"getpursesnotifier"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#getpursesnotifier"}},[e._v("#")]),e._v(" "),a("code",[e._v("getPursesNotifier()")])]),e._v(" "),a("ul",[a("li",[e._v("Returns: "),a("code",[e._v("{Promise<Notifier<Array<PursesJSONState>>>}")])])]),e._v(" "),a("p",[e._v("Returns a notifier that follows changes the purses in the Wallet.")]),e._v(" "),a("h3",{attrs:{id:"getoffersnotifier"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#getoffersnotifier"}},[e._v("#")]),e._v(" "),a("code",[e._v("getOffersNotifier()")])]),e._v(" "),a("ul",[a("li",[e._v("Returns: "),a("code",[e._v("{Promise<Notifier<array<OfferState>>>}")])])]),e._v(" "),a("p",[e._v("Returns a notifier that follows changes to the offers received by the Wallet.")]),e._v(" "),a("h3",{attrs:{id:"suggestissuer-petname-issuerboardid"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#suggestissuer-petname-issuerboardid"}},[e._v("#")]),e._v(" "),a("code",[e._v("suggestIssuer(petname, issuerBoardId)")])]),e._v(" "),a("ul",[a("li",[a("code",[e._v("petname")]),e._v(" "),a("code",[e._v("{Petname}")])]),e._v(" "),a("li",[a("code",[e._v("issuerBoardId")]),e._v(" "),a("code",[e._v("{string}")])]),e._v(" "),a("li",[e._v("Returns: "),a("code",[e._v("void")])])]),e._v(" "),a("p",[e._v("Introduce an ERTP issuer with a suggested petname to the Wallet.")]),e._v(" "),a("h3",{attrs:{id:"suggestinstallation-petname-installationboardid"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#suggestinstallation-petname-installationboardid"}},[e._v("#")]),e._v(" "),a("code",[e._v("suggestInstallation(petname, installationBoardID)")])]),e._v(" "),a("ul",[a("li",[a("code",[e._v("petname")]),e._v(" "),a("code",[e._v("{Petname}")])]),e._v(" "),a("li",[a("code",[e._v("installationBoardId")]),e._v(" "),a("code",[e._v("{string}")])]),e._v(" "),a("li",[e._v("Returns: "),a("code",[e._v("void")])])]),e._v(" "),a("p",[e._v("Introduce a Zoe contract installation with a suggested petname to the Wallet.")]),e._v(" "),a("h3",{attrs:{id:"suggestinstance-petname-instanceboardid"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#suggestinstance-petname-instanceboardid"}},[e._v("#")]),e._v(" "),a("code",[e._v("suggestInstance(petname, instanceBoardId)")])]),e._v(" "),a("ul",[a("li",[a("code",[e._v("petname")]),e._v(" "),a("code",[e._v("{Petname}")])]),e._v(" "),a("li",[a("code",[e._v("instanceBoardId")]),e._v(" "),a("code",[e._v("{string}")])]),e._v(" "),a("li",[e._v("Returns: "),a("code",[e._v("void")])])]),e._v(" "),a("p",[e._v("Introduce a Zoe contract instance with a suggested petname to the Wallet.")])])}),[],!1,null,null,null);t.default=r.exports}}]);