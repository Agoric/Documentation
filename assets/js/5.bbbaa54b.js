(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{207:function(t,e,a){t.exports=a.p+"assets/img/rplace.39a64ca5.png"},208:function(t,e,a){t.exports=a.p+"assets/img/pixel-demo.a4f6abd1.png"},251:function(t,e,a){"use strict";a.r(e);var s=a(0),n=Object(s.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"pixel-demo"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#pixel-demo"}},[t._v("#")]),t._v(" Pixel Demo")]),t._v(" "),s("p",[t._v("This demo is roughly based on "),s("a",{attrs:{href:"https://en.wikipedia.org/wiki/Place_(Reddit)",target:"_blank",rel:"noopener noreferrer"}},[t._v("Reddit's\nr/Place"),s("OutboundLink")],1),t._v(", but has a\nnumber of additional features that showcase the unique affordances of\nthe Agoric platform, including: higher-order contracts, easy creation\nof new assets, and safe code reusability.")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"center"}},[s("img",{attrs:{src:a(207),alt:"Reddit's r/place"}})])])]),t._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"center"}},[s("em",[t._v("Reddit's r/place as a social experiment in cooperation")])])])])]),t._v(" "),s("h2",{attrs:{id:"installation"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#installation"}},[t._v("#")]),t._v(" Installation")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"center"}},[s("img",{attrs:{src:a(208),alt:"Pixel Gallery"}})])])]),t._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"center"}},[s("em",[t._v("The testnet pixel demo. Slightly fewer pixels.")])])])])]),t._v(" "),s("p",[t._v("The pixel demo runs on "),s("a",{attrs:{href:"https://github.com/Agoric/cosmic-swingset#agorics-cosmic-swingset",target:"_blank",rel:"noopener noreferrer"}},[t._v("our private testnet"),s("OutboundLink")],1),t._v(". For instructions on how to\nrun a local, off-chain version for yourself, please see "),s("a",{attrs:{href:"https://github.com/Agoric/cosmic-swingset#different-scenarios",target:"_blank",rel:"noopener noreferrer"}},[t._v("Scenario 3\nhere"),s("OutboundLink")],1),t._v(".")]),t._v(" "),s("h2",{attrs:{id:"getting-started"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#getting-started"}},[t._v("#")]),t._v(" Getting Started")]),t._v(" "),s("p",[t._v("In the pixel demo, the goal is to be able to amass enough pixels to\ndraw a design on a pixel canvas. You start out empty-handed, with no\nmoney and no pixels to your name. However, you do have access to the "),s("em",[t._v("gallery")]),t._v(", the\nadministrator of the canvas. The gallery has a handful of\nmethods that allow you to obtain a few pixels for free, color them,\nsell them, and buy more.")]),t._v(" "),s("p",[t._v("To access the gallery, type "),s("code",[t._v("home.gallery")]),t._v(" in the REPL. "),s("code",[t._v("home.gallery")]),t._v("\nis a remote object (what we call a "),s("em",[t._v("presence")]),t._v("). It actually lives in\nanother environment (what we call a "),s("em",[t._v("vat")]),t._v("). Instead of "),s("code",[t._v("obj.foo()")]),t._v(", we\ncan write "),s("code",[t._v("E(obj).foo()")]),t._v(" or the syntactic sugar, "),s("code",[t._v("obj~.foo()")]),t._v(" and get a\npromise for the result. We call this syntactic sugar "),s("a",{attrs:{href:"https://github.com/Agoric/proposal-wavy-dot",target:"_blank",rel:"noopener noreferrer"}},[t._v("'wavy dot'"),s("OutboundLink")],1),t._v('. The syntax\nmeans "deliver the message foo() to the actual object asynchronously,\nin its own turn, wherever and whenever it is, even if it is local."\nUsing '),s("code",[t._v("E")]),t._v(" or "),s("code",[t._v("~.")]),t._v(", you can talk asynchronously to local and remote objects\nin exactly the same way. For example, the first thing you might want\nto do is tap the gallery faucet to get a pixel for free:")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("px "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" home"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("gallery"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("~")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("tapFaucet")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[s("code",[t._v("tapFaucet")]),t._v(" returns a pixel and saves it under "),s("code",[t._v("px")]),t._v(". The pixel that you receive is\nactually in the form of an ERTP payment. "),s("router-link",{attrs:{to:"/ertp/guide/"}},[t._v("ERTP")]),t._v(" (Electronic Rights Transfer Protocol)\nis our smart contract framework for handling transferable objects.\nPayments have a few functions. Let's call "),s("code",[t._v("getBalance()")]),t._v(" on our payment\nto see which pixel we received.")],1),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("px"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("~")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBalance")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("You might see something like:")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"label"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"assay"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("Presence "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("15")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"allegedName"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"pixels"')]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"units"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"x"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"y"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("The "),s("code",[t._v("units")]),t._v(" tells us which pixels we've received. "),s("code",[t._v("{ x:1, y:4 }")]),t._v("\nmeans that we got a pixel that is in the fifth row ("),s("code",[t._v("y:4")]),t._v(") and 2 pixels\nfrom the left ("),s("code",[t._v("x:1")]),t._v("). To color the pixel, we need to get the use\nobject from the payment. You can think of the use object as a regular\nJavaScript object that just happens to be associated with an ERTP\npayment.")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("use "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" px"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("~")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getUse")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("Your use object will be stored under "),s("code",[t._v("use")]),t._v(". Now we\ncan use it to color.")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("use"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("~")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("changeColorAll")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'#FF69B4'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("The following commands show a pixel being obtained from the faucet,\ngetting the 'use' object, coloring the pixel, and selling a pixel to the gallery through an\nescrow smart contract.")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("px = home.gallery~.tapFaucet();\npx~.getBalance();\nuse = px~.getUse();\nuse~.changeColorAll('yellow');\npx2 = home.gallery~.tapFaucet();\nasset2 = px2~.getBalance();\nasset2.then(a => home.gallery~.pricePixelUnitOps(a));\nhostInvite = home.gallery~.sellToGallery(asset2);\nseat = hostInvite~.host~.redeem(hostInvite~.inviteP);\noffered = seat~.offer(px2);\nassays = home.gallery~.getAssays();\npxPurse = assays~.pixelAssay~.makeEmptyPurse();\ndustPurse = assays~.dustAssay~.makeEmptyPurse();\ncollected = offered.then(_ => home.gallery~.collectFromGallery(seat, dustPurse, pxPurse, 'my escrow'));\ncollected.then(_ => dustPurse~.getBalance());\n")])])]),s("p",[t._v("Woohoo! We're now a few dust richer than when we started.")]),t._v(" "),s("p",[t._v("Learn more about ERTP and our pixel demo "),s("a",{attrs:{href:"https://github.com/Agoric/ERTP",target:"_blank",rel:"noopener noreferrer"}},[t._v("here"),s("OutboundLink")],1),t._v(".")]),t._v(" "),s("p",[t._v("To see the contracts you've uploaded "),s("a",{attrs:{href:"https://github.com/Agoric/cosmic-swingset/blob/master/lib/ag-solo/contracts/README-contract.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("as per the README"),s("OutboundLink")],1),t._v(", try:")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("home"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("uploads"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("~")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("list")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nhome"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("uploads"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("~")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'encouragementBot'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("~")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("spawn")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("~")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("encourageMe")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Person'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h2",{attrs:{id:"initial-endowments"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#initial-endowments"}},[t._v("#")]),t._v(" Initial Endowments")]),t._v(" "),s("p",[t._v("When a client is started up, it has a few items in a record named home.")]),t._v(" "),s("ul",[s("li",[t._v("gallery: the Pixel Gallery, described above")]),t._v(" "),s("li",[t._v("purse: a purse that can hold pixel Dust")]),t._v(" "),s("li",[t._v("moolah: a purse that starts out with 1000 "),s("code",[t._v("moolah")])]),t._v(" "),s("li",[t._v("sharingService: a service that makes it possible to pass capabilities between vats")]),t._v(" "),s("li",[t._v("canvasStatePublisher: a service with the message subscribe(callback)")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://github.com/Agoric/cosmic-swingset/blob/master/lib/ag-solo/contracts/README-contract.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("uploads"),s("OutboundLink")],1),t._v(": a private directory\nof contracts you've uploaded")]),t._v(" "),s("li",[t._v("registrar: a public directory for published objects")]),t._v(" "),s("li",[t._v("localTimerService and chainTimerService: tools for scheduling")]),t._v(" "),s("li",[s("router-link",{attrs:{to:"/zoe/guide/"}},[t._v("zoe")]),t._v(": support for contracts with Offer-Safety Enforcement")],1)]),t._v(" "),s("h3",{attrs:{id:"sharingservice"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#sharingservice"}},[t._v("#")]),t._v(" sharingService")]),t._v(" "),s("p",[s("code",[t._v("home.sharingService")]),t._v(" is a service that lets you connect to\nother vats that are connected to the same remote chain vat. sharingService\nhas three methods: "),s("code",[t._v("createSharedMap(name)")]),t._v(", "),s("code",[t._v("grabSharedMap(name)")]),t._v(", and\n"),s("code",[t._v("validate(sharedMap)")]),t._v(". These allow you to create a SharedMap which you can\nuse to pass items to and from another vat. The sharingService's\nmethods are designed to allow you to share a newly created sharedMap\nwith one other vat, after which the name can't be reused.")]),t._v(" "),s("p",[t._v("The way to use it is to call "),s("code",[t._v("createSharedMap()")]),t._v("with a name that you share\nwith someone else. They then call "),s("code",[t._v("grabSharedMap")]),t._v("() and pass the name you\ngave. If they get a valid SharedMap, then you have a private\nchannel. If they don't get it, then someone else must have tried to\ngrab the name first, and you can discard that one and try again.")]),t._v(" "),s("p",[t._v("Once you each have an end, either of you can call "),s("code",[t._v("addEntry(key, value)")]),t._v("\nto store an object, which the other party can retrieve with\n"),s("code",[t._v("lookup(key)")]),t._v(".")]),t._v(" "),s("h3",{attrs:{id:"canvasstatepublisher"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#canvasstatepublisher"}},[t._v("#")]),t._v(" canvasStatePublisher")]),t._v(" "),s("p",[s("code",[t._v("home.canvasStatePublisher")]),t._v(" has a "),s("code",[t._v("subscribe()")]),t._v(" method, which takes a callback\nfunction. When the state of the pixel gallery changes, the callback's\n"),s("code",[t._v("notify()")]),t._v(" method is called with the new state.")])])}),[],!1,null,null,null);e.default=n.exports}}]);