(window.webpackJsonp=window.webpackJsonp||[]).push([[53],{453:function(t,e,s){"use strict";s.r(e);var a=s(41),n=Object(a.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"zoe"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#zoe"}},[t._v("#")]),t._v(" Zoe")]),t._v(" "),s("Zoe-Version"),t._v(" "),s("p",[t._v("Zoe provides a framework for deploying and working with smart contracts. It is accessed\nas a long-lived and well-trusted service that enforces offer safety for the contracts that use it. Zoe has a single "),s("code",[t._v("invitationIssuer")]),t._v(" for the entirety of its lifetime. By having a reference to Zoe, a user can get the "),s("code",[t._v("invitationIssuer")]),t._v(" and thus validate any "),s("code",[t._v("invitation")]),t._v(" they receive from someone else.")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("Zoe is accessed asynchronously")]),t._v(" "),s("p",[t._v("The Zoe service is accessed asynchronously, using a standards-track library extension\nto JavaScript that uses promises as remote references. In code, the Zoe service instance\nis referred to via "),s("code",[t._v("zoe")]),t._v(", which only supports asynchronous invocation. Operations are\ninvoked asynchronously using the "),s("a",{attrs:{href:"https://github.com/tc39/proposal-eventual-send#e-and-esendonly-convenience-proxies",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("E")]),t._v(" helper for async messaging"),s("OutboundLink")],1),t._v(".\nAll such operations immediately return a promise for their result. That may eventually fulfill to a local value, or to a "),s("code",[t._v("Presence")]),t._v(" for another remote object (e.g. in another contract or service, running on another chain, etc.). Async messages can be sent using "),s("code",[t._v("E")]),t._v(" with either promises or presences.")]),t._v(" "),s("p",[t._v("For more information about using "),s("code",[t._v("E")]),t._v(", see the section on it in "),s("RouterLink",{attrs:{to:"/distributed-programming.html"}},[t._v("Agoric's JavaScript Distributed Programming Guide")]),t._v(".")],1)]),t._v(" "),s("h2",{attrs:{id:"e-zoe-getbrands-instance"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#e-zoe-getbrands-instance"}},[t._v("#")]),t._v(" E(zoe).getBrands(instance)")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("instance")]),t._v(" "),s("code",[t._v("{Instance}")])]),t._v(" "),s("li",[t._v("Returns: "),s("code",[t._v("{Promise<BrandKeywordRecord>}")])])]),t._v(" "),s("p",[t._v("Returns a "),s("code",[t._v("BrandKeywordRecord")]),t._v(" containing all "),s("code",[t._v("brands")]),t._v(" defined in the contract "),s("code",[t._v("instance")]),t._v(".")]),t._v(" "),s("p",[t._v("A "),s("code",[t._v("BrandKeywordRecord")]),t._v(" is a record where the keys are keywords,\nand the values are the "),s("code",[t._v("brands")]),t._v(" for particular "),s("code",[t._v("issuers")]),t._v(".")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Call example")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" brandKeywordRecord "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("E")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("zoe"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBrands")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("instance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Record example")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" brandKeywordRecord "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  Asset"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" quatloosBrand"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  Price"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" moolaBrand"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h2",{attrs:{id:"e-zoe-getissuers-instance"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#e-zoe-getissuers-instance"}},[t._v("#")]),t._v(" E(zoe).getIssuers(instance)")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("instance")]),t._v(" "),s("code",[t._v("{Instance}")])]),t._v(" "),s("li",[t._v("Returns: "),s("code",[t._v("{Promise<IssuerKeywordRecord>}")])])]),t._v(" "),s("p",[t._v("Returns a "),s("code",[t._v("IssuerKeywordRecord")]),t._v(" containing all "),s("code",[t._v("issuers")]),t._v(" defined in the "),s("code",[t._v("instance")]),t._v(" argument.")]),t._v(" "),s("p",[t._v("An "),s("code",[t._v("IssuerKeywordRecord")]),t._v(" is a record where the keys are keywords,\nand the values are "),s("code",[t._v("issuers")]),t._v(".")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Call example")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" issuerKeywordRecord "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("E")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("zoe"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getIssuers")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("instance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Record example")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" issuerKeywordRecord "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  Asset"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" quatloosIssuer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  Price"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" moolaIssuer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h2",{attrs:{id:"e-zoe-getterms-instance"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#e-zoe-getterms-instance"}},[t._v("#")]),t._v(" E(zoe).getTerms(instance)")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("instance")]),t._v(" "),s("code",[t._v("{Instance}")])]),t._v(" "),s("li",[t._v("Returns: "),s("code",[t._v("{Object}")])])]),t._v(" "),s("p",[t._v("Returns the terms of the "),s("code",[t._v("instance")]),t._v(" argument, including its "),s("code",[t._v("issuers")]),t._v(", "),s("code",[t._v("brands")]),t._v(", "),s("code",[t._v("maths")]),t._v(" and any\ncustom terms. The returned values look like:")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" brands"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" issuers"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" maths"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" customTermA"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" customTermB "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//where brands, issuers, and maths are all keywordRecords, like:")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    brands"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("A")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" moolaKit"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("brand"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("B")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" simoleanKit"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("brand "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    issuers"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("A")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" moolaKit"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("issuer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("B")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" simoleanKit"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("issuer "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    maths"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("A")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" moolaKit"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("amountMath"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("B")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" simoleanKit"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("amountMath "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    customTermA"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'something'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    customTermB"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'something else'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" terms "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("E")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("zoe"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getTerms")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("instance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h2",{attrs:{id:"e-zoe-getpublicfacet-instance"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#e-zoe-getpublicfacet-instance"}},[t._v("#")]),t._v(" E(zoe).getPublicFacet(instance)")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("instance")]),t._v(" "),s("code",[t._v("{Instance}")])]),t._v(" "),s("li",[t._v("Returns: "),s("code",[t._v("{Promise<PublicFacet>}")])])]),t._v(" "),s("p",[t._v("A contract instance's "),s("code",[t._v("publicFacet")]),t._v(" is an object available via Zoe to anyone knowing that "),s("code",[t._v("instance")]),t._v(".\nYou use it for general queries and actions, such as getting a current price or creating public invitations.\nSince a facet is defined just as any other object, the contract adds methods to the "),s("code",[t._v("publicFacet")]),t._v(" just like you would\nany object.")]),t._v(" "),s("p",[t._v("Returns a "),s("code",[t._v("publicFacet")]),t._v(" containing the public facet defined for "),s("code",[t._v("instance")]),t._v(".")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" ticketSalesPublicFacet "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("E")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("zoe"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getPublicFacet")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sellItemsInstance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h2",{attrs:{id:"e-zoe-getinvitationissuer"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#e-zoe-getinvitationissuer"}},[t._v("#")]),t._v(" E(zoe).getInvitationIssuer()")]),t._v(" "),s("ul",[s("li",[t._v("Returns "),s("code",[t._v("{Issuer}")])])]),t._v(" "),s("p",[t._v("Zoe has a single "),s("code",[t._v("invitationIssuer")]),t._v(" for its entire\nlifetime. By having a reference to Zoe, a user can get the "),s("code",[t._v("invitationIssuer")]),t._v(". This lets them claim any\ninvitation they receive from someone else by calling "),s("code",[t._v("E(invitationIssuer).claim()")]),t._v(" with the\nuntrusted invitation as the argument. During the claiming process, the "),s("code",[t._v("invitationIssuer")]),t._v(" validates\nthe invitation.")]),t._v(" "),s("p",[t._v("The "),s("code",[t._v("mint")]),t._v(" associated with the "),s("code",[t._v("invitationIssuer")]),t._v("\ncreates "),s("code",[t._v("invitations")]),t._v(" in the form of ERTP "),s("code",[t._v("payments")]),t._v(" that represent the right to interact with\na smart contract in particular ways.")]),t._v(" "),s("p",[t._v("The "),s("code",[t._v("invitationIssuer")]),t._v(" has two methods, both of which take an "),s("code",[t._v("invitation")]),t._v(" as an argument.\nRemember, an "),s("code",[t._v("invitation")]),t._v(" is just a special case of an ERTP "),s("code",[t._v("payment")]),t._v(", so "),s("code",[t._v("claim()")]),t._v(" and\n"),s("code",[t._v("getAmountOf()")]),t._v(" are the same as for other "),s("code",[t._v("issuers")]),t._v(".")]),t._v(" "),s("p",[t._v("A successful call of "),s("code",[t._v("invitationIssuer.claim(invitation)")]),t._v(" means you are assured the "),s("code",[t._v("invitation")]),t._v("\nis recognized as valid by the "),s("code",[t._v("invitationIssuer")]),t._v(". You are also assured the "),s("code",[t._v("invitation")]),t._v(" is exclusively yours\nand no one else has access to it.")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" invitationIssuer "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("E")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("zoe"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getInvitationIssuer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Here a user, Bob, has received an untrusted invitation from Alice.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Bob uses the trusted `invitationIssuer` from Zoe to")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// transform the untrusted invitation to a trusted one")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" invitation "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" invitationIssuer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("claim")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("untrustedInvitation"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" value"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" invitationValue "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("E")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("invitationIssuer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getAmountOf")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("invitation"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h2",{attrs:{id:"e-zoe-getinvitationdetails-invitation"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#e-zoe-getinvitationdetails-invitation"}},[t._v("#")]),t._v(" E(zoe).getInvitationDetails(invitation)")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("invitation")]),t._v(" "),s("code",[t._v("{Invitation}")])]),t._v(" "),s("li",[t._v("Returns "),s("code",[t._v("{Promise<Object>}")])])]),t._v(" "),s("p",[t._v("Takes an "),s("code",[t._v("invitation")]),t._v(" as an argument and returns an object containing the following\ndetails about the "),s("code",[t._v("invitation")]),t._v(":")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("installation")]),t._v(" "),s("code",[t._v("{Installation}")]),t._v(": The contract's installation in Zoe.")]),t._v(" "),s("li",[s("code",[t._v("instance")]),t._v(" "),s("code",[t._v("{Instance}")]),t._v(": The contract instance this invitation is for.")]),t._v(" "),s("li",[s("code",[t._v("invitationHandle")]),t._v(" "),s("code",[t._v("{Handle}")]),t._v(": A handle used to refer to this invitation.")]),t._v(" "),s("li",[s("code",[t._v("description")]),t._v(" "),s("code",[t._v("{String}")]),t._v(": describes the purpose of this "),s("code",[t._v("invitation")]),t._v(". Use it\nto match the invitation to the role it plays in the contract.")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" invitation "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" invitationIssuer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("claim")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("untrustedInvitation"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" invitationValue "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("E")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("zoe"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getInvitationDetails")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("invitation"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h2",{attrs:{id:"e-zoe-install-bundle"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#e-zoe-install-bundle"}},[t._v("#")]),t._v(" E(zoe).install(bundle)")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("bundle")]),t._v(" "),s("code",[t._v("{SourceBundle}")])]),t._v(" "),s("li",[t._v("Returns: "),s("code",[t._v("{Promise<Installation>}")])])]),t._v(" "),s("p",[t._v("Takes bundled source code for a Zoe contract as an argument and installs the code on Zoe.\nReturns an "),s("code",[t._v("installation")]),t._v(" object.")]),t._v(" "),s("p",[t._v("An "),s("code",[t._v("installation")]),t._v(" is an object with one property:")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("bundle")]),t._v(":  The contract source code, accessible via "),s("code",[t._v("bundle.source")]),t._v(", and other info.")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// bundleSource takes source code files and")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// bundles them together in the format install expects.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" bundleSource "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@agoric/bundle-source'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" bundle "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("bundleSource")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("pathResolve")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("./src/contract.js")]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" installationP "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("E")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("zoe"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("bundle"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h2",{attrs:{id:"e-zoe-getinstance-invitation"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#e-zoe-getinstance-invitation"}},[t._v("#")]),t._v(" E(zoe).getInstance(invitation)")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("invitation")]),t._v(" "),s("code",[t._v("{Invitation}")])]),t._v(" "),s("li",[t._v("Returns: "),s("code",[t._v("{Promise<Instance>}")])])]),t._v(" "),s("p",[t._v("Returns a "),s("code",[t._v("Promise")]),t._v(" for the contract "),s("code",[t._v("instance")]),t._v(" the "),s("code",[t._v("invitation")]),t._v(" is part of.")]),t._v(" "),s("p",[t._v("While "),s("code",[t._v("instances")]),t._v(" are opaque objects, you can get information about them via\nthese methods:")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("getBrands()")])]),t._v(" "),s("li",[s("code",[t._v("getTerms()")])]),t._v(" "),s("li",[s("code",[t._v("getIssuers()")])]),t._v(" "),s("li",[s("code",[t._v("getPublicFacet()")])])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" instance "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("E")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("zoe"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getInstance")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("invitation"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h2",{attrs:{id:"e-zoe-getinstallation-invitation"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#e-zoe-getinstallation-invitation"}},[t._v("#")]),t._v(" E(zoe).getInstallation(invitation)")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("invitation")]),t._v(" "),s("code",[t._v("{Invitation}")])]),t._v(" "),s("li",[t._v("Returns: "),s("code",[t._v("{Promise<Installation>}")])])]),t._v(" "),s("p",[t._v("Returns a "),s("code",[t._v("Promise")]),t._v(" for the contract "),s("code",[t._v("installation")]),t._v(" the "),s("code",[t._v("invitation")]),t._v("'s contract instance uses.")]),t._v(" "),s("p",[t._v("An "),s("code",[t._v("installation")]),t._v(" is an object with one property:")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("bundle")]),t._v(":  The contract source code, accessible via "),s("code",[t._v("bundle.source")]),t._v(", and other info.")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" installation "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("E")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("zoe"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getInstallation")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("invitation"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h2",{attrs:{id:"e-zoe-startinstance-installation-issuerkeywordrecord-terms"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#e-zoe-startinstance-installation-issuerkeywordrecord-terms"}},[t._v("#")]),t._v(" E(zoe).startInstance(installation, issuerKeywordRecord, terms)")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("installation")]),t._v(" "),s("code",[t._v("{ERef<Installation>}")])]),t._v(" "),s("li",[s("code",[t._v("issuerKeywordRecord")]),t._v(" "),s("code",[t._v("{IssuerKeywordRecord}")])]),t._v(" "),s("li",[s("code",[t._v("terms")]),t._v(" "),s("code",[t._v("{Object}")])]),t._v(" "),s("li",[t._v("Returns: "),s("code",[t._v("{Promise<StartInstanceResult>}")])])]),t._v(" "),s("p",[t._v("Create an instance of the installed smart contract (specified by\nthe "),s("code",[t._v("installation")]),t._v(" argument). You must also specify the\ninstance's "),s("code",[t._v("issuerKeywordRecord")]),t._v(" (as key-value pairs) and "),s("code",[t._v("terms")]),t._v("\nfor the contract.")]),t._v(" "),s("p",[t._v("The "),s("code",[t._v("issuerKeywordRecord")]),t._v(" is a record mapping string names (keywords)\nto issuers, such as "),s("code",[t._v("{ Asset: quatlooIssuer}")]),t._v(". Keywords must begin\nwith a capital letter and must be ASCII. Parties to the contract will\nuse the keywords to index their proposal and their payments.")]),t._v(" "),s("p",[t._v("The "),s("code",[t._v("terms")]),t._v(" are values used by this contract instance, such as the\nnumber of bids an auction will wait for before closing. These values may\nbe different for different instances of the same contract, but the contract\ndefines what variables need their values passed in as "),s("code",[t._v("terms")]),t._v(".")]),t._v(" "),s("p",[t._v("It returns a promise for a "),s("code",[t._v("StartInstanceResult")]),t._v(" object. The object consists of:")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("adminFacet")]),t._v(" "),s("code",[t._v("{any}")])]),t._v(" "),s("li",[s("code",[t._v("creatorFacet")]),t._v(" "),s("code",[t._v("{any}")])]),t._v(" "),s("li",[s("code",[t._v("publicFacet")]),t._v(" "),s("code",[t._v("{any}")])]),t._v(" "),s("li",[s("code",[t._v("instance")]),t._v(" "),s("code",[t._v("{Instance}")])]),t._v(" "),s("li",[s("code",[t._v("creatorInvitation")]),t._v(" "),s("code",[t._v("{Payment | undefined}")])])]),t._v(" "),s("p",[t._v("The "),s("code",[t._v("adminFacet")]),t._v(" has two methods:")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("getVatShutdownPromise()")]),t._v(" "),s("ul",[s("li",[t._v("Returns a promise that resolves to reason (the value passed to "),s("code",[t._v("fail(reason)")]),t._v(") or\ncompletion (the value passed to "),s("code",[t._v("exit(completion)")]),t._v(") when this newly started instance terminates.")])])]),t._v(" "),s("li",[s("code",[t._v("getVatStats()")]),t._v(" "),s("ul",[s("li",[t._v("Returns statistics about vat activity. These are the number of different types\nof items in the vat's C-List, which tracks what this vat can reach on other vats\nand how many entries are in the vat's transcript. The last gives an idea of\nhow many messages this vat has executed. A vat's transcript of messages it has\nexecuted lets it replay those messages if restarted and restore its pre-shutdown\nstate.\n"),s("ul",[s("li",[s("code",[t._v("objectCount")])]),t._v(" "),s("li",[s("code",[t._v("promiseCount")])]),t._v(" "),s("li",[s("code",[t._v("deviceCount")])]),t._v(" "),s("li",[s("code",[t._v("transcriptCount")])])])])])])]),t._v(" "),s("p",[t._v("A "),s("code",[t._v("publicFacet")]),t._v(" is an object available via Zoe to anyone knowing\nthe instance they are associated with. The "),s("code",[t._v("publicFacet")]),t._v(" is used for general queries\nand actions, such as getting a current price or creating public invitations. Since a\nfacet is defined just as any other object,\nthe contract developer can add methods to them just like they would any object.")]),t._v(" "),s("p",[t._v("The "),s("code",[t._v("creatorFacet")]),t._v(" is only available in this return value (i.e. only when starting\na contract instance). The contract designer\nshould use it to encapsulate things that the contract runner might not want to share,\nor might want to control the distribution of. The party who starts the contract\nshould carefully consider the impact before sharing access to the "),s("code",[t._v("creatorFacet")]),t._v(".")]),t._v(" "),s("p",[s("code",[t._v("creatorInvitation")]),t._v(" is an invitation that the contract instance creator can use.\nIt is usually used in contracts where the creator immediately sells\nsomething (auctions, swaps, etc.), so it's helpful for the creator to have\nan invitation to escrow and sell goods. Remember that Zoe invitations are\nrepresented as a "),s("code",[t._v("Payment")]),t._v(".")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" issuerKeywordRecord "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Asset'")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" moolaIssuer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Price'")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" quatlooIssuer\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" terms "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" numBids"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" creatorFacet"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" publicFacet"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" creatorInvitation "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("E")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("zoe"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("startInstance")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  installation"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" issuerKeywordRecord"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" terms"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h2",{attrs:{id:"e-zoe-offer-invitation-proposal-paymentkeywordrecord"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#e-zoe-offer-invitation-proposal-paymentkeywordrecord"}},[t._v("#")]),t._v(" E(Zoe).offer(invitation, proposal, paymentKeywordRecord)")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("invitation")]),t._v(" "),s("code",[t._v("{Invitation|Promise<Invitation>}")])]),t._v(" "),s("li",[s("code",[t._v("proposal")]),t._v(" "),s("code",[t._v("{Proposal}")])]),t._v(" "),s("li",[s("code",[t._v("paymentKeywordRecord")]),t._v(" "),s("code",[t._v("{PaymentKeywordRecord}")])]),t._v(" "),s("li",[t._v("Returns: "),s("code",[t._v("{Promise<UserSeat>}")])])]),t._v(" "),s("p",[t._v("Used to make an offer to the contract that created the "),s("code",[t._v("invitation")]),t._v(" that is\nprovided as the first argument.")]),t._v(" "),s("p",[t._v("The invocation normally includes a "),s("code",[t._v("proposal")]),t._v(" (the\nrules under which they want to exercise the offer) and "),s("code",[t._v("payments")]),t._v(" that correspond to the "),s("code",[t._v("give")]),t._v(" property of the "),s("code",[t._v("proposal")]),t._v(". The payments will be escrowed by Zoe. If\neither the "),s("code",[t._v("proposal")]),t._v("or "),s("code",[t._v("payments")]),t._v(" are empty, indicate this by\nomitting that argument or passing "),s("code",[t._v("undefined")]),t._v(", instead of passing an\nempty record.")]),t._v(" "),s("p",[t._v("The optional "),s("code",[t._v("exit")]),t._v("'s value should be an "),s("code",[t._v("exitRule")]),t._v(", an object with three possible keys for\nkey:value pairs:")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("onDemand:null")]),t._v(":  (Default) The user can cancel on demand.")]),t._v(" "),s("li",[s("code",[t._v("waived:null")]),t._v(": The user can't cancel and relies entirely on the smart contract to promptly finish their offer.")]),t._v(" "),s("li",[s("code",[t._v("afterDeadline")]),t._v(": The offer is automatically cancelled after a deadline, as determined\nby its "),s("code",[t._v("timer")]),t._v(" and "),s("code",[t._v("deadline")]),t._v(" properties. The timer is a timer, and the "),s("code",[t._v("deadline")]),t._v(" is with respect to the\ntimer. Some example timers use Unix epoch time, while others count block height. Note that "),s("code",[t._v("deadline")]),t._v("'s\nvalue is a "),s("code",[t._v("BigInt")]),t._v(", not a "),s("code",[t._v("Number")]),t._v(' (just append an "n" to the number you want to use to get its '),s("code",[t._v("BigInt")]),t._v(")")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" myProposal "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("harden")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  give"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Asset"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("quatloos")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4n")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  want"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Price"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("moola")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("15n")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  exit"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" afterDeadline"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    timer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    deadline"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100n")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[s("code",[t._v("paymentKeywordRecord")]),t._v(" is a record with keywords as keys, with\nvalues of the actual "),s("code",[t._v("payments")]),t._v(" to be escrowed. A "),s("code",[t._v("payment")]),t._v(" is\nexpected for every entry under "),s("code",[t._v("give")]),t._v(".")]),t._v(" "),s("p",[s("code",[t._v("offer()")]),t._v(" returns a promise for a "),s("code",[t._v("UserSeat")]),t._v(".")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" paymentKeywordRecord "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Asset'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" quatloosPayment"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Price'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" moolaPayment\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h2",{attrs:{id:"userseat-object"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#userseat-object"}},[t._v("#")]),t._v(" UserSeat Object")]),t._v(" "),s("p",[t._v("Zoe uses "),s("code",[t._v("seats")]),t._v(" to access or manipulate offers. They let contracts and users interact\nwith them. Zoe has two kinds of seats. "),s("code",[t._v("ZCFSeats")]),t._v("\nare used within contracts and with "),s("code",[t._v("zcf")]),t._v(" methods. "),s("code",[t._v("UserSeats")]),t._v(" represent offers external to\nZoe and the contract. The party who exercises an invitation and sends the "),s("code",[t._v("offer()")]),t._v(" message\nto Zoe gets a "),s("code",[t._v("UserSeat")]),t._v(" that can check payouts' status or retrieve the result of\nprocessing the offer in the contract. This varies, but examples\nare a "),s("code",[t._v("string")]),t._v(" and an "),s("code",[t._v("invitation")]),t._v(" for another seat.")]),t._v(" "),s("p",[t._v("Also, a "),s("code",[t._v("UserSeat")]),t._v(" can be handed to an agent outside Zoe and the contract, letting\nthem query or monitor the current state, access the payouts and result,\nand, if it's allowed for this seat, call "),s("code",[t._v("tryExit()")]),t._v(".")]),t._v(" "),s("p",[t._v("Since anyone can attempt to exit the seat if they have a reference to it,\nyou should only share a "),s("code",[t._v("UserSeat")]),t._v(" with trusted parties.")]),t._v(" "),s("p",[s("code",[t._v("UserSeat")]),t._v(" includes queries for the associated offer's current state\nand an operation to request that the offer exit, as follows:")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("getCurrentAllocation()")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("Returns: "),s("code",[t._v("{ Promise<Allocation> }")])])]),t._v(" "),s("li",[s("p",[t._v("An "),s("code",[t._v("Allocation")]),t._v(" is an "),s("code",[t._v("AmountKeywordRecord")]),t._v(" of key-value pairs where\nthe key is a keyword such as "),s("code",[t._v("Asset")]),t._v(" or "),s("code",[t._v("Price")]),t._v(" applicable to the\ncontract. The value is an "),s("code",[t._v("amount")]),t._v(".")]),t._v(" "),s("p",[s("code",[t._v("Allocations")]),t._v(" represent the "),s("code",[t._v("amounts")]),t._v(" to be paid out to each "),s("code",[t._v("seat")]),t._v(" on exit.\n(After "),s("code",[t._v("exit()")]),t._v(" has been called, the final allocation balances, which were transferred to\npayouts, continue to be reported.) Normal\nreasons for exiting are the user requesting to exit or the contract explicitly choosing\nto close out the "),s("code",[t._v("seat")]),t._v(". The guarantees also hold if the contract encounters an error or\nmisbehaves. There are several methods for finding out what "),s("code",[t._v("amount")]),t._v(" a\ncurrent "),s("code",[t._v("allocation")]),t._v(" is.")]),t._v(" "),s("p",[t._v("An "),s("code",[t._v("Allocation")]),t._v(" example:")]),t._v(" "),s("ul",[s("li",[s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  Asset"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" quatloosAmountMath"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5n")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  Price"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" moolaAmountMath"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("9n")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])])])])]),t._v(" "),s("li",[s("code",[t._v("getProposal()")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("Returns: "),s("code",[t._v("{ Promise<ProposalRecord> }")])])]),t._v(" "),s("li",[s("p",[t._v("A "),s("code",[t._v("Proposal")]),t._v(" is represented by a "),s("code",[t._v("ProposalRecord")]),t._v(". It is the rules\naccompanying the escrow of "),s("code",[t._v("payments")]),t._v(" dictating what the user expects\nto get back from Zoe. It has keys "),s("code",[t._v("give")]),t._v(", "),s("code",[t._v("want")]),t._v(", and\n"),s("code",[t._v("exit")]),t._v(". "),s("code",[t._v("give")]),t._v(" and "),s("code",[t._v("want")]),t._v(" are records with keywords as keys and\n"),s("code",[t._v("amounts")]),t._v(" as values. If it is compatible with the contract, the\ncontract tries to satisfy it. If not, the contract kicks the "),s("code",[t._v("seat")]),t._v(" out.")]),t._v(" "),s("p",[t._v("Offer safety is always enforced; if kicked out, the user gets back\nwhat they put in. If the contract attempts to satisfy it, they either\nget what they asked for or Zoe ensures they get back their deposit.")])]),t._v(" "),s("li",[s("p",[t._v("Example:")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" want"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" give"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" exit "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" sellerSeat"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getProposal")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])])])]),t._v(" "),s("li",[s("code",[t._v("getPayouts()")]),t._v(" "),s("ul",[s("li",[t._v("Returns: "),s("code",[t._v("{ Promise<PaymentPKeywordRecord> }")])]),t._v(" "),s("li",[t._v("A "),s("code",[t._v("payout")]),t._v(" is a "),s("code",[t._v("payment")]),t._v(" that goes to a party in a successful transaction, redirecting\nescrowed assets in accordance with the result of the transaction. Returns a record\ncontaining all the "),s("code",[t._v("payout")]),t._v(" "),s("code",[t._v("payments")]),t._v(" associated with the "),s("code",[t._v("seat")]),t._v("'s offers.")])])]),t._v(" "),s("li",[s("code",[t._v("getPayout(keyword)")]),t._v(" "),s("ul",[s("li",[t._v("Returns: "),s("code",[t._v("{ Promise<Payment> }")])]),t._v(" "),s("li",[t._v("A "),s("code",[t._v("payout")]),t._v(" is a "),s("code",[t._v("payment")]),t._v(" that goes to a party in a successful transaction, redirecting\nescrowed assets in accordance with the result of the transaction. Returns the "),s("code",[t._v("payout")]),t._v(" "),s("code",[t._v("payment")]),t._v(" associated with the "),s("code",[t._v("keyword")]),t._v(" argument.")])])]),t._v(" "),s("li",[s("code",[t._v("getOfferResult()")]),t._v(" "),s("ul",[s("li",[t._v("Returns: "),s("code",[t._v("{ Promise<OfferResult> }")])]),t._v(" "),s("li",[t._v("The returned "),s("code",[t._v("OfferResult")]),t._v(" can be literally anything. For example, in tests\nfor the Automated Refund Dapp, it's the string \"The offer was accepted\". In\nthe Covered Call example, it's a call option, which is an assayable "),s("code",[t._v("invitation")]),t._v("\nto buy the underlying asset. Strings and invitations are the most common things returned.\nThe value is set by the returned result of  the "),s("code",[t._v("offerHandlers")]),t._v(" function passed\nas an argument to "),s("code",[t._v("zcf.makeInvitation()")]),t._v(".")])])]),t._v(" "),s("li",[s("code",[t._v("getNotifier()")]),t._v(" "),s("ul",[s("li",[t._v("Returns: "),s("code",[t._v("{ Promise<Notifier> }")])]),t._v(" "),s("li",[t._v("You use a "),s("code",[t._v("notifier")]),t._v(" wherever some piece of code has changing state that other\ncode wants updates on. The updates can be anything the contract wants to publish.\nFor example, you could notify about price changes, new currency pools, etc. For\nmore about "),s("code",[t._v("notifiers")]),t._v(", see our "),s("RouterLink",{attrs:{to:"/distributed-programming.html#notifiers"}},[t._v("Distributed Programming Guide")])],1)])]),t._v(" "),s("li",[s("code",[t._v("hasExited()")]),t._v(" "),s("ul",[s("li",[t._v("Returns: "),s("code",[t._v("{ Promise<Boolean> }")])]),t._v(" "),s("li",[t._v("Returns "),s("code",[t._v("true")]),t._v(" if the seat has exited, "),s("code",[t._v("false")]),t._v(" if it is still active.")])])]),t._v(" "),s("li",[s("code",[t._v("tryExit()")]),t._v(" "),s("ul",[s("li",[t._v("Returns "),s("code",[t._v("{ Void }")])]),t._v(" "),s("li",[t._v("Note: Only works if the "),s("code",[t._v("seat")]),t._v("'s "),s("code",[t._v("proposal")]),t._v(" has an "),s("code",[t._v("OnDemand")]),t._v(" "),s("code",[t._v("exit")]),t._v(" clause.\nZoe's offer-safety guarantee applies no matter how a "),s("code",[t._v("seat")]),t._v("'s interaction with\na contract ends. Under normal\ncircumstances, the participant might be able to call "),s("code",[t._v("tryExit()")]),t._v(", or the\ncontract might do something explicitly. On exiting, the seat holder\ngets its current "),s("code",[t._v("allocation")]),t._v(" and the "),s("code",[t._v("seat")]),t._v(" can no longer interact with the contract.")])])])])],1)}),[],!1,null,null,null);e.default=n.exports}}]);