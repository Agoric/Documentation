(window.webpackJsonp=window.webpackJsonp||[]).push([[48],{257:function(t,e,a){"use strict";a.r(e);var s=a(0),n=Object(s.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"zoe-contract-facet"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#zoe-contract-facet"}},[t._v("#")]),t._v(" Zoe Contract Facet")]),t._v(" "),a("Zoe-Version"),t._v(" "),a("p",[t._v("A Zoe Contract Facet is an API object for a running contract instance to access the Zoe state for that instance. A Zoe Contract Facet is accessed synchronously from within the contract, and usually is referred to in code as "),a("code",[t._v("zcf")]),t._v(". The contract instance is launched by "),a("code",[t._v("E(zoe).makeInstance")]),t._v(", and is given access to the "),a("code",[t._v("zcf")]),t._v(" object during that launch. In the operation below, the "),a("code",[t._v("instanceHandle")]),t._v(" is the handle for the running contract instance.")]),t._v(" "),a("h2",{attrs:{id:"zcf-reallocate-offerhandles-newamountkeywordrecords-sparsekeywords"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#zcf-reallocate-offerhandles-newamountkeywordrecords-sparsekeywords"}},[t._v("#")]),t._v(" zcf.reallocate(offerHandles, newAmountKeywordRecords, sparseKeywords)")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("offerHandles")]),t._v(" "),a("router-link",{attrs:{to:"/glossary/#handle"}},[a("code",[t._v("{Array <Handle>}")])])],1),t._v(" "),a("li",[a("code",[t._v("newAmountKeywordRecords")]),t._v(" "),a("router-link",{attrs:{to:"/zoe/api/records.html#amountkeywordrecord"}},[a("code",[t._v("{Array <AmountKeywordRecord>}")])])],1)]),t._v(" "),a("p",[t._v("Instruct Zoe to try to reallocate payouts for the given "),a("code",[t._v("offerHandles")]),t._v(".  This will only succeed if the reallocation 1) conserves rights, and 2) is 'offer-safe' for all parties involved. This reallocation is partial, meaning that it applies only to\nthe amount associated with the offerHandles that are passed in.  We are able to ensure that with each reallocation,\nrights are conserved and offer safety is enforced for all offers, even though the reallocation is partial, because once\nthese invariants are true, they will remain true until changes are made.")]),t._v(" "),a("p",[t._v("newAmountKeywordRecords is an array of "),a("code",[t._v("AmountKeywordRecords")]),t._v(", which are objects where the keys are keywords and the\nvalues are the amounts to be paid to the offer at the same index in the "),a("code",[t._v("offerHandles")]),t._v(". Note that the offer keywords\ncan be different for different offers with no effect on a reallocation.")]),t._v(" "),a("p",[t._v("This operation throws an error:")]),t._v(" "),a("ul",[a("li",[t._v("If there are only 0 or 1 offerHandles given.")])]),t._v(" "),a("p",[t._v("The reallocation only happens if 'offer safety' and conservation of rights are true, as enforced by Zoe.")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" harden "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@agoric/harden'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// reallocate by switching the amount of the firstOffer and matchingOffer")]),t._v("\nzcf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("reallocate")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("harden")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("firstOfferHandle"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" matchingOfferHandle"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("harden")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("matchingOfferAmount"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" firstOfferAmount"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h2",{attrs:{id:"zcf-complete-offerhandles"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#zcf-complete-offerhandles"}},[t._v("#")]),t._v(" zcf.complete(offerHandles)")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("offerHandles")]),t._v(" "),a("router-link",{attrs:{to:"/glossary/#handle"}},[a("code",[t._v("{Array <Handle>}")])])],1)]),t._v(" "),a("p",[t._v("Eject the offer, taking the current allocation for that offer and creating payments to be returned to the user. No 'offer safety' checks are done here because any previous reallocation performed those checks.")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" harden "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@agoric/harden'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nzcf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("complete")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("harden")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("someOfferHandle"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h2",{attrs:{id:"zcf-addnewissuer-issuer-keyword"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#zcf-addnewissuer-issuer-keyword"}},[t._v("#")]),t._v(" zcf.addNewIssuer(issuer, keyword)")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("issuer")]),t._v(" "),a("router-link",{attrs:{to:"/ertp/api/issuer.html"}},[a("code",[t._v("{Issuer}")])])],1),t._v(" "),a("li",[a("code",[t._v("keyword")]),t._v(" "),a("code",[t._v("{String}")])]),t._v(" "),a("li",[t._v("Returns: "),a("code",[t._v("{Promise}")])])]),t._v(" "),a("p",[t._v("Inform Zoe about a new issuer. Returns a promise for acknowledging when the issuer is added and ready.")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("zcf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addNewIssuer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("liquidityIssuer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Liquidity'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//do stuff")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h2",{attrs:{id:"zcf-getzoeservice"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#zcf-getzoeservice"}},[t._v("#")]),t._v(" zcf.getZoeService()")]),t._v(" "),a("ul",[a("li",[t._v("Returns: "),a("router-link",{attrs:{to:"/zoe/api/zoe.html#zoe"}},[a("code",[t._v("{ZoeService}")])])],1)]),t._v(" "),a("p",[t._v("Expose the user-facing "),a("router-link",{attrs:{to:"/zoe/api/zoe.html#zoe"}},[t._v("Zoe Service API")]),t._v(" to the contracts as well.")],1),t._v(" "),a("h2",{attrs:{id:"zcf-makeinvitation-offerhook-invitedesc-customproperties"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#zcf-makeinvitation-offerhook-invitedesc-customproperties"}},[t._v("#")]),t._v(" zcf.makeInvitation(offerHook, inviteDesc, customProperties)")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("offerHook")]),t._v(" "),a("code",[t._v("{OfferHandle => Object}")])]),t._v(" "),a("li",[a("code",[t._v("inviteDesc")]),t._v(" "),a("code",[t._v("{String}")])]),t._v(" "),a("li",[a("code",[t._v("customProperties")]),t._v(" "),a("code",[t._v("{Object}")])]),t._v(" "),a("li",[t._v("Returns: "),a("router-link",{attrs:{to:"/ertp/api/payment.html#payment"}},[a("code",[t._v("{Invite}")])])],1)]),t._v(" "),a("p",[t._v("Make a credible Zoe invite for the associated smart contract. The Invite\nis a "),a("code",[t._v("Payment")]),t._v(" minted from Zoe's internal "),a("code",[t._v("inviteMint")]),t._v(". It can be used\nin "),a("code",[t._v("E(zoe).offer")]),t._v(" for the holder of it to participate in this contract.")]),t._v(" "),a("p",[t._v("When an offer is submitted via the invitation, "),a("code",[t._v("offerHook")]),t._v(" will be\ninvoked in the contract with a handle for the offer. The result of the\n"),a("code",[t._v("offerHook")]),t._v(' will be returned as the "outcome" of making the offer via\nthe invitation.')]),t._v(" "),a("p",[t._v("The "),a("code",[t._v("inviteDesc")]),t._v(' is a string used as a description of the invite, such as\n"bidderInvite" or "exerciseOption". It\'s mainly used to enable searching for\nand finding particular invites in a contract.')]),t._v(" "),a("p",[t._v("The "),a("code",[t._v("customProperties")]),t._v(" is an object whose properties contain information\nas defined by the smart contract, to include in the extent of the\ninvitation.")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" invite "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" zcf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("makeInvitation")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  myAuction"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("onNewOffer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" inviteDesc"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'bid'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" auctionedAssets"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" tickets3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" minimumBid"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" simoleans100 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h2",{attrs:{id:"zcf-getinviteissuer"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#zcf-getinviteissuer"}},[t._v("#")]),t._v(" zcf.getInviteIssuer()")]),t._v(" "),a("ul",[a("li",[t._v("Returns: "),a("router-link",{attrs:{to:"/ertp/api/issuer.html"}},[a("code",[t._v("{Issuer}")])])],1)]),t._v(" "),a("p",[t._v("Get the Zoe "),a("code",[t._v("inviteIssuer")]),t._v(".")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" inviteIssuer "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" zcf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getInviteIssuer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h2",{attrs:{id:"zcf-getbrandforissuer-issuer"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#zcf-getbrandforissuer-issuer"}},[t._v("#")]),t._v(" zcf.getBrandForIssuer(issuer)")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("issuer")]),t._v(" "),a("code",[t._v("{Issuer}")])]),t._v(" "),a("li",[t._v("Returns "),a("code",[t._v("{Brand}")])])]),t._v(" "),a("p",[t._v("Returns the "),a("code",[t._v("brand")]),t._v(" of the "),a("code",[t._v("issuer")]),t._v(" argument")]),t._v(" "),a("h2",{attrs:{id:"zcf-getissuerforbrand-brand"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#zcf-getissuerforbrand-brand"}},[t._v("#")]),t._v(" zcf.getIssuerForBrand(brand)")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("brand")]),t._v(" "),a("code",[t._v("{Brand}")])]),t._v(" "),a("li",[t._v("Returns "),a("code",[t._v("{Issuer}")])])]),t._v(" "),a("p",[t._v("Returns the "),a("code",[t._v("issuer")]),t._v(" of the "),a("code",[t._v("brand")]),t._v(" argument")]),t._v(" "),a("h2",{attrs:{id:"zcf-getamountmath-brand"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#zcf-getamountmath-brand"}},[t._v("#")]),t._v(" zcf.getAmountMath(brand)")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("brand")]),t._v(" "),a("code",[t._v("{String}")])]),t._v(" "),a("li",[t._v("Returns "),a("code",[t._v("{amountMath}")])])]),t._v(" "),a("p",[t._v("Returns the "),a("code",[t._v("amountMath")]),t._v(" object associated with the "),a("code",[t._v("brand")]),t._v(" argument.")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" ticketIssuer "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" publicAPI"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getTicketIssuer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" ticketAmountMath "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ticketIssuer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getAmountMath")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h2",{attrs:{id:"zcf-isofferactive-offerhandle"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#zcf-isofferactive-offerhandle"}},[t._v("#")]),t._v(" zcf.isOfferActive(offerHandle)")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("offerHandles")]),t._v(" "),a("router-link",{attrs:{to:"/glossary/#handle"}},[a("code",[t._v("{Array <Handle>}")])])],1),t._v(" "),a("li",[t._v("Returns: "),a("code",[t._v("{Boolean}")])])]),t._v(" "),a("p",[t._v("Check if the offer is still active. This method does not throw if the offer is inactive.")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" isActive "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" zcf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("isOfferActive")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("someOfferHandle"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h2",{attrs:{id:"zcf-getofferstatuses-offerhandles"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#zcf-getofferstatuses-offerhandles"}},[t._v("#")]),t._v(" zcf.getOfferStatuses(offerHandles)")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("offerHandles")]),t._v(" "),a("router-link",{attrs:{to:"/glossary/#handle"}},[a("code",[t._v("{Array <Handle>}")])])],1),t._v(" "),a("li",[t._v("Returns: "),a("router-link",{attrs:{to:"/zoe/api/records.html#offerstatuses-record"}},[a("code",[t._v("{OfferStatusesRecord}")])])],1)]),t._v(" "),a("p",[t._v("Divide the "),a("code",[t._v("offerHandles")]),t._v(" into 'active' and 'inactive' lists")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" active"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" activeBidHandles "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" zcf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getOfferStatuses")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("harden")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("allBidHandles"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h2",{attrs:{id:"zcf-getoffers-offerhandles"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#zcf-getoffers-offerhandles"}},[t._v("#")]),t._v(" zcf.getOffers(offerHandles)")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("offerHandles")]),t._v(" "),a("router-link",{attrs:{to:"/glossary/#handle"}},[a("code",[t._v("{Array <Handle>}")])])],1),t._v(" "),a("li",[t._v("Returns: "),a("router-link",{attrs:{to:"/zoe/api/records.html#offer-record"}},[a("code",[t._v("{Array <OfferRecord>}")])])],1)]),t._v(" "),a("p",[t._v("Get a list of offer records.")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" offers "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" zcf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getOffers")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("listOfOfferHandles"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h2",{attrs:{id:"zcf-getoffer-offerhandle"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#zcf-getoffer-offerhandle"}},[t._v("#")]),t._v(" zcf.getOffer(offerHandle)")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("offerHandle")]),t._v(" "),a("router-link",{attrs:{to:"/glossary/#handle"}},[a("code",[t._v("{Array <Handle>}")])])],1),t._v(" "),a("li",[t._v("Returns: "),a("router-link",{attrs:{to:"/zoe/api/records.html#offer-record"}},[a("code",[t._v("{<OfferRecord>}")])])],1)]),t._v(" "),a("p",[t._v("Get the offer record.")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" payoutRules "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" zcf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getOffer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("offerHandle"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h2",{attrs:{id:"zcf-getinstancerecord"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#zcf-getinstancerecord"}},[t._v("#")]),t._v(" zcf.getInstanceRecord()")]),t._v(" "),a("ul",[a("li",[t._v("Returns: "),a("router-link",{attrs:{to:"/zoe/api/records.html#instance-record-properties"}},[a("code",[t._v("{InstanceRecord}")])])],1)]),t._v(" "),a("p",[t._v('Get the instance record. This allows the contracts to get access\nto their keywords, issuers and other "instanceRecord" information from\nZoe.')]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" issuerKeywordRecord"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" keywords"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" terms "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" zcf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getInstanceRecord")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h2",{attrs:{id:"zcf-getcurrentallocation-offerhandle-brandkeywordrecord"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#zcf-getcurrentallocation-offerhandle-brandkeywordrecord"}},[t._v("#")]),t._v(" zcf.getCurrentAllocation(offerHandle, brandKeywordRecord)")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("offerHandle")]),t._v(" "),a("router-link",{attrs:{to:"/glossary/#handle"}},[a("code",[t._v("{Array <Handle>}")])])],1),t._v(" "),a("li",[a("code",[t._v("brandKeywordRecord")]),t._v(" An optional parameter. If omitted, only returns amounts for brands for which an allocation currently exists.")]),t._v(" "),a("li",[t._v("Returns: "),a("router-link",{attrs:{to:"/zoe/api/records.html#amount-keyword-record"}},[a("code",[t._v("{<AmountKeywordRecord>}")])])],1)]),t._v(" "),a("p",[t._v("Get the amounts associated with the "),a("code",[t._v("brand")]),t._v("s for the offer. If the optional "),a("code",[t._v("brandKeywordRecord")]),t._v("\nargument is omitted, it only returns amounts for brands for which an allocation currently exists.")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" foo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" bar "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" zcf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getCurrentAllocation")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("offerHandle"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'foo'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'bar'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h2",{attrs:{id:"zcf-getcurrentallocations-offerhandles-brandkeywordrecord"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#zcf-getcurrentallocations-offerhandles-brandkeywordrecord"}},[t._v("#")]),t._v(" zcf.getCurrentAllocations(offerHandles, brandKeywordRecord)")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("offerHandles")]),t._v(" "),a("router-link",{attrs:{to:"/glossary/#handle"}},[a("code",[t._v("{Array <Handle>}")])])],1),t._v(" "),a("li",[a("code",[t._v("brandKeywordRecord")]),t._v(" An optional parameter. If omitted, only returns amounts for brands for which an allocation currently exists")]),t._v(" "),a("li",[t._v("Returns: "),a("router-link",{attrs:{to:"/zoe/api/records.html#amount-keyword-record"}},[a("code",[t._v("{[<AmountKeywordRecord>]}")])])],1)]),t._v(" "),a("p",[t._v("Get a list of the amounts associated with the "),a("code",[t._v("brand")]),t._v(" for the offers. If the optional "),a("code",[t._v("brandKeywordRecord")]),t._v("\nargument is omitted, it only returns amounts for brands for which an allocation currently exists.")]),t._v(" "),a("h2",{attrs:{id:"zcf-getoffernotifier-offerhandle"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#zcf-getoffernotifier-offerhandle"}},[t._v("#")]),t._v(" zcf.getOfferNotifier(offerHandle)")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("offerHandle")]),t._v(" "),a("router-link",{attrs:{to:"/glossary/#handle"}},[a("code",[t._v("<Handle>")])])],1),t._v(" "),a("li",[t._v("Returns: a "),a("router-link",{attrs:{to:"/glossary/#notifier"}},[t._v("notifier")]),t._v(" for the offer.")],1)]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" offerNotifer "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" zcf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getOfferNotifier")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("offerHandle"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" updateHandle"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" done "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" offerNotifier"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getUpdateSince")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("done"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("drop offer "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" list"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  newValue "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("waitForNextUpdate")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("offerNotifier"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" updateHandle"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h2",{attrs:{id:"zcf-initpublicapi-publicapi"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#zcf-initpublicapi-publicapi"}},[t._v("#")]),t._v(" zcf.initPublicAPI(publicAPI)")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("publicAPI")]),t._v(" "),a("Object")],1),t._v(" "),a("li",[t._v("Returns "),a("code",[t._v("{void}")])])]),t._v(" "),a("p",[t._v("Initialize the publicAPI for the contract instance, as stored by Zoe in\nthe instanceRecord. The "),a("code",[t._v("publicAPI")]),t._v(" argument is an object whose methods are the API\navailable to anyone who knows the "),a("code",[t._v("instanceHandle")])])],1)}),[],!1,null,null,null);e.default=n.exports}}]);