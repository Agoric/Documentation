(window.webpackJsonp=window.webpackJsonp||[]).push([[92],{496:function(t,e,a){"use strict";a.r(e);var s=a(41),n=Object(s.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"price-authority"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#price-authority"}},[t._v("#")]),t._v(" Price Authority")]),t._v(" "),a("p",[t._v("A "),a("code",[t._v("priceAuthority")]),t._v(" can be used in contracts (usually specified in the\nterms of a contract) to provide a price feed, on-demand quotes, and wakeups for\nvarious time and price conditions.")]),t._v(" "),a("h2",{attrs:{id:"examples"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#examples"}},[t._v("#")]),t._v(" Examples")]),t._v(" "),a("p",[t._v("To see a "),a("code",[t._v("priceAuthority")]),t._v(" in use, see the "),a("a",{attrs:{href:"https://github.com/Agoric/agoric-sdk/tree/master/packages/zoe/src/contracts/loan",target:"_blank",rel:"noopener noreferrer"}},[t._v("Loan\ncontract"),a("OutboundLink")],1),t._v("\nand the "),a("a",{attrs:{href:"https://github.com/Agoric/agoric-sdk/blob/master/packages/zoe/src/contracts/callSpread.js",target:"_blank",rel:"noopener noreferrer"}},[t._v("Call Spread\ncontract"),a("OutboundLink")],1),t._v(".")]),t._v(" "),a("h2",{attrs:{id:"receiving-a-quote"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#receiving-a-quote"}},[t._v("#")]),t._v(" Receiving a quote")]),t._v(" "),a("p",[t._v("A "),a("code",[t._v("priceAuthority")]),t._v(" has a number of different methods that will return\nofficial "),a("code",[t._v("priceQuotes")]),t._v(". A "),a("code",[t._v("priceQuote")]),t._v(" is an amount, payment pair,\nwhere the amount is also the current balance of the payment:")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" quoteAmount"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" quotePayment "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" priceQuote"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("Because these are ERTP amounts and payments, they have issuers. And\nthe payments are minted by an ERTP mint. A quote issuer and mint may\nbe shared by several "),a("code",[t._v("priceAuthorities")]),t._v(", and a "),a("code",[t._v("priceAuthority")]),t._v(" may\nuse several quoteIssuers.")]),t._v(" "),a("p",[t._v("Importantly, you can confirm the brand of a quote and that it was minted by the\nmint associated with the quoteIssuer by using the "),a("code",[t._v("quoteIssuer")]),t._v(" to obtain the\n"),a("code",[t._v("quoteAmount")]),t._v(" of the "),a("code",[t._v("quotePayment")]),t._v(":")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" verifiedQuoteAmount "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("E")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("quoteIssuer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getAmountOf")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("quotePayment"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("Once you have a "),a("code",[t._v("quoteAmount")]),t._v(" (or a "),a("code",[t._v("verifiedQuoteAmount")]),t._v("), you can extract the\nquoted amounts:")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" amountIn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" amountOut"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" timestamp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" timer "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" quoteAmount"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("This means that the "),a("code",[t._v("priceAuthority")]),t._v(" asserts that when "),a("code",[t._v("timestamp")]),t._v(" according to\n"),a("code",[t._v("timer")]),t._v(" happened, you could sell "),a("code",[t._v("amountIn")]),t._v(" and receive "),a("code",[t._v("amountOut")]),t._v(" for it.\n"),a("code",[t._v("amountIn")]),t._v(" and "),a("code",[t._v("amountOut")]),t._v(" are ERTP amounts for the "),a("code",[t._v("brandIn")]),t._v(" and "),a("code",[t._v("brandOut")]),t._v(" you\nrequested.")]),t._v(" "),a("h2",{attrs:{id:"api-reference"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#api-reference"}},[t._v("#")]),t._v(" API Reference")]),t._v(" "),a("p",[t._v("The Price Authority API reference is a section of the "),a("RouterLink",{attrs:{to:"/zoe/api/contract-support/price-authority.html"}},[t._v("Zoe API reference")])],1)])}),[],!1,null,null,null);e.default=n.exports}}]);